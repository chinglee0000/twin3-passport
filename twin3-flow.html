<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>twin3 Passport - Complete Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sansation:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">

    <!-- Web3Modal v2 (更穩定的版本) -->
    <script src="https://unpkg.com/web3modal@1.9.12/dist/index.js"></script>
    <script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>



    <style>
        :root {
            --primary-bg: #0a0a0a;
            --border-color: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --text-muted: #555555;
            --accent-color: #ffffff;

            /* Tailwind backdrop-filter variables */
            --tw-backdrop-blur: blur(4px);
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
        }

        body {
            font-family: 'Kanit', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-bg);
            min-height: 100vh;
            color: var(--text-primary);
            margin: 0;
            padding: 0;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            backdrop-filter: blur(8px);
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.08);
        }

        .btn-primary {
            border: 1px solid #373737;
            color: black;
            background: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 300;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-family: 'Kanit', sans-serif;
        }

        .btn-primary:hover:not(:disabled) {
            background: transparent;
            color: white;
            border-color: white;
            transform: translateY(-1px);
        }

        .btn-primary:disabled {
            background: rgba(255, 255, 255, 0.1);
            color: #666666;
            border-color: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 300;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
        }

        .btn-secondary:hover {
            border-color: #555555;
            color: var(--text-primary);
        }

        /* Subtle glow effect */
        .shadow-glow {
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        /* Navigation bar styles */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            backdrop-filter: blur(8px);
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1rem;
        }

        /* Responsive padding matching twin3_backup-main */
        @media (min-width: 768px) {
            .nav-bar {
                padding: 1rem 2rem;
            }
        }

        @media (min-width: 1024px) {
            .nav-bar {
                padding: 1rem 4rem;
            }
        }

        .nav-logo {
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .nav-logo img {
            width: 2.5rem;
            height: 2.5rem;
        }

        @media (min-width: 768px) {
            .nav-logo img {
                width: 2.5rem;
                height: 2.5rem;
            }
        }

        .mobile-menu-btn {
            display: block;
            color: white;
            background: none;
            border: none;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .mobile-menu-btn {
                display: none;
            }
        }

        .nav-actions {
            display: none;
            align-items: center;
        }

        @media (min-width: 768px) {
            .nav-actions {
                display: flex;
            }
        }

        .nav-link {
            display: block;
            padding: 0.5rem 1rem;
            color: white;
            text-decoration: none;
            transition: all 0.2s ease;
            font-weight: 200;
        }

        .nav-link:hover {
            background: #ffffff;
            color: #000000;
        }

        /* Focused/current page state: grey text, not clickable */
        .nav-link-focused,
        .nav-link[aria-current="page"] {
            color: #9CA3AF;
            pointer-events: none;
            cursor: default;
            background: transparent;
        }
        .nav-link-focused:hover,
        .nav-link[aria-current="page"]:hover {
            background: transparent;
            color: #9CA3AF;
        }

        .wallet-button {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .wallet-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .wallet-balance {
            margin-right: 0.5rem;
            font-size: 0.875rem;
            font-weight: 200;
        }

        .wallet-address {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.375rem;
        }

        .wallet-avatar {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: rgb(197, 218, 219);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .wallet-address-text {
            font-size: 0.875rem;
            font-weight: 200;
        }

        .dropdown-icon {
            width: 0.875rem;
            height: 0.4375rem;
            margin-left: 0.25rem;
        }

        .input-field {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 16px 20px;
            color: white;
            width: 100%;
            font-size: 16px;
            font-weight: 400;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .input-field::placeholder {
            color: #9C9C9C;
            font-weight: 400;
        }

        .select-field {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 16px 20px;
            padding-right: 48px;
            color: white;
            width: 100%;
            font-size: 16px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239C9C9C' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 16px center;
            background-repeat: no-repeat;
            background-size: 16px;
        }

        .select-field:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .select-field option {
            background: #1a1a1a;
            color: white;
            padding: 12px;
        }

        .progress-bar {
            background: #222222;
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            background: rgba(255, 255, 255, 0.8);
            height: 100%;
            transition: width 0.3s ease;
        }



        .custom-select {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .custom-select-trigger {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 16px 20px;
            color: white;
            width: 100%;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .custom-select-trigger:hover {
            border-color: rgba(255, 255, 255, 0.25);
            background: rgba(255, 255, 255, 0.12);
        }

        .custom-select-trigger.active {
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
        }

        .custom-select-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #FFFFFF0D;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            margin-top: 4px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .custom-select-options.show {
            display: block;
        }

        .custom-select-option {
            padding: 12px 16px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: background-color 0.2s ease;
        }

        .custom-select-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .custom-select-option .material-icons {
            color: white;
            font-size: 20px;
        }

        .custom-select-selected {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .custom-select-selected .material-icons {
            color: white;
            font-size: 20px;
        }

        .input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .input-wrapper .input-field {
            padding-right: 48px;
        }

        .input-clear {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #9C9C9C;
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            display: none;
            transition: all 0.2s ease;
        }

        .input-clear:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .input-wrapper.has-value .input-clear {
            display: block;
        }

        .grid-bg {
            background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0);
            background-size: 40px 40px;
        }

        .particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            overflow: hidden;
            z-index: 1;
            pointer-events: none;
        }

        .particle-bg video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            object-fit: cover;
            opacity: 0.6;
        }

        .particle-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: 2;
        }

        @keyframes particle-flow {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0.7;
            }
            50% {
                transform: translateY(-50px) scale(1.05);
                opacity: 0.9;
            }
            100% {
                transform: translateY(-100px) scale(1.1);
                opacity: 0.7;
            }
        }

        @keyframes particle-flow-reverse {
            0% {
                transform: translateY(0) scale(1.1) rotate(0deg);
                opacity: 0.5;
            }
            50% {
                transform: translateY(30px) scale(1) rotate(1deg);
                opacity: 0.7;
            }
            100% {
                transform: translateY(60px) scale(0.95) rotate(2deg);
                opacity: 0.5;
            }
        }



        /* Dark overlay to improve text readability */
        .particle-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2;
        }

        @keyframes particle-drift {
            0% {
                transform: translateX(0) translateY(0) scale(1);
                opacity: 0.3;
            }
            25% {
                transform: translateX(-20px) translateY(-30px) scale(1.02);
                opacity: 0.5;
            }
            50% {
                transform: translateX(10px) translateY(-60px) scale(1.05);
                opacity: 0.4;
            }
            75% {
                transform: translateX(-10px) translateY(-30px) scale(1.02);
                opacity: 0.5;
            }
            100% {
                transform: translateX(0) translateY(0) scale(1);
                opacity: 0.3;
            }
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            pointer-events: none;
            bottom: -10px;
            animation: float-particle 12s infinite linear;
        }

        @keyframes float-particle {
            0% {
                transform: translateY(0) translateX(0px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-110vh) translateX(100px);
                opacity: 0;
            }
        }

        /* 統一的頁面容器 - 所有頁面都使用相同結構 */
        .page-container {
            position: relative;
            min-height: 100vh;
        }

        .page-video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }

        .page-content-container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.25rem;
            padding-top: 6rem; /* Add space for fixed nav bar */
            padding-bottom: 2rem; /* Add space for footer */
            max-width: 1400px;
            margin: 0 auto;
            gap: 2rem;
        }

        .page-unified-content {
            backdrop-filter: blur(8px);
            border-radius: 12px;
            padding: 2rem;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: space-between;
            gap: 2rem;
            min-height: fit-content;
        }

        .page-left-content {
            flex: 1;
            max-width: 48rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
        }

        .page-right-action {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            flex-shrink: 0;
            width: 100%;
            align-self: stretch;
            gap: 1.5rem;
            padding: 2rem;
        }

        /* Typography: unify to Welcome standard */
        .page-main-title, .main-title, .t3-h1 {
            color: white;
            /* font-size removed to allow responsive Tailwind classes */
            font-weight: 300;
            line-height: 1.2;
            margin-bottom: 1rem;
            font-family: 'Kanit', sans-serif;
        }

        .page-subtitle, .subtitle, .t3-h2 {
            color: #888888;
            /* font-size removed to allow responsive Tailwind classes */
            font-weight: 200;
            margin-bottom: 2rem;
            font-family: 'Kanit', sans-serif;
        }

        .page-description, .description, .t3-body {
            color: #cccccc;
            /* font-size removed to allow responsive Tailwind classes */
            font-weight: 200;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-family: 'Kanit', sans-serif;
        }

        /* Typography tokens within unified content blocks (Welcome/Proof) */
        .page-unified-content .page-main-title,
        .unified-content-block .main-title {
            font-weight: 300;
            font-family: 'Kanit', sans-serif;
        }
        .page-unified-content .page-subtitle,
        .unified-content-block .subtitle {
            font-weight: 200;
            font-family: 'Kanit', sans-serif;
        }
        .page-unified-content .page-description,
        .unified-content-block .description {
            font-weight: 200;
            font-family: 'Kanit', sans-serif;
        }


        /* Buttons: unify to Welcome standard */
        .page-action-button, .action-button, .start-btn, #step1-btn {
            width: 100%;
        }

        /* Make verification step buttons hug content */
        .verification-steps .page-action-button,
        .verification-steps .start-btn,
        .verification-steps #step1-btn {
            width: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        /* Ensure step numbers are perfect circles and centered */
        .verification-steps .step-number {
            width: 2rem;
            height: 2rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }
            /* button base is defined elsewhere; stray block removed */

        /* Center left-content at ~1000px width */
        @media (max-width: 1024px) and (min-width: 769px) {
            .unified-content-block { justify-content: center !important; }
            .page-left-content { text-align: center !important; align-items: center !important; }
        }



        .page-action-button:hover:not(:disabled),
        .action-button:hover:not(:disabled),
        .start-btn:hover:not(:disabled),
        #step1-btn:hover:not(:disabled) {
            background: transparent;
            color: white;
            border-color: white;
            transform: translateY(-1px);
        }

        /* Force center left-content around ~1000px */
        @media (max-width: 1100px) and (min-width: 768px) {
            .unified-content-block { align-items: center; justify-content: center; }
            .page-left-content { margin-left: auto; margin-right: auto; text-align: center; align-items: center; }
        }

        .page-action-button:disabled,
        .action-button:disabled,
        .start-btn:disabled,
        #step1-btn:disabled {
            background: rgba(255, 255, 255, 0.1);
            color: #666666;
            border-color: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            transform: none;
        }

        .page-action-button:active:not(:disabled),
        .action-button:active:not(:disabled),
        .start-btn:active:not(:disabled),
        #step1-btn:active:not(:disabled) {
            transform: translateY(0);
            filter: brightness(0.95);
        }

        /* 響應式設計 */
        @media (min-width: 1024px) {
            .page-content-container {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                padding: 2.5rem 4rem;
                padding-top: 6rem;
                gap: 4rem;
            }

            .page-unified-content {
                flex-direction: row;
                align-items: stretch;
                gap: 2rem;
            }

            .page-left-content {
                text-align: left;
                justify-content: center;
            }

            .page-right-action {
                width: auto;
                min-width: fit-content;
            }

            .page-main-title {
                font-size: 4.5rem;
                font-weight: 300;
            }

            .page-subtitle {
                font-size: 1.875rem;
            }

            .page-description {
                font-size: 1.125rem;
            }
        }

        @media (min-width: 1536px) {
            .page-main-title {
                font-size: 7.25rem;
            }
        }

        /* 保持原有的 welcome-container 類以向後兼容（與 page-content-container 一致置中） */
        .welcome-container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.25rem;
            padding-top: 6rem; /* Add space for fixed nav bar */
            padding-bottom: 2rem; /* Add space for footer */
            max-width: 1400px;
            margin: 0 auto;
            gap: 2rem;
        }

        @media (min-width: 1024px) {
            .welcome-container {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                padding: 2.5rem 4rem;
                padding-top: 6rem;
                gap: 4rem;
            }
        }

        .welcome-content {
            width: 100%;
            background: transparent;
            height: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem;
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
            backdrop-filter: blur(4px);
            text-align: center;
        }

        @media (min-width: 768px) {
            .welcome-content {
                align-items: center;
            }
        }

        @media (min-width: 1024px) {
            .welcome-content {
                width: 60%;
                align-items: flex-start;
                padding: 2.5rem;
                text-align: left;
            }
        }

        .welcome-subtitle {
            color: #525252;
            font-size: 1.125rem;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        @media (min-width: 768px) {
            .welcome-subtitle {
                font-size: 1.5rem;
            }
        }

        .welcome-title {
            color: white;
            font-size: 2.25rem;
            font-weight: 300; /* Light */
            line-height: 1.2;
            text-transform: uppercase;
            margin-bottom: 2rem;
            font-family: 'Kanit', sans-serif;
        }

        @media (min-width: 768px) {
            .welcome-title {
                font-size: 3.75rem;
            }
        }

        @media (min-width: 1024px) {
            .welcome-title {
                font-size: 4.5rem;
                font-weight: bold;
            }
        }

        @media (min-width: 1536px) {
            .welcome-title {
                font-size: 7.25rem;
            }
        }

        .welcome-title .subtitle-text {
            color: #525252;
            font-weight: 300;
        }

        @media (min-width: 1024px) {
            .welcome-title .subtitle-text {
                font-weight: 300;
            }
        }

        .tbold {
            font-family: 'Kanit', sans-serif;
            font-weight: 700; /* Bold */
        }

        .tlight {
            font-family: 'Kanit', sans-serif;
            font-weight: 300; /* Light */
        }

        .tsemibold {
            font-family: 'Kanit', sans-serif;
            font-weight: 300; /* Light */
        }

        .backdrop-blur-sm, .backdrop-filter {
            -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);
            backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);
        }

        .footer-section {
            position: relative;
            z-index: 10;
            padding: 2rem 0;
            text-align: center;
        }



        .welcome-form {
            background: transparent;
            backdrop-filter: none;
            border: none;
            border-radius: 0;
            padding: 0;
            width: 100%;
            max-width: none;
            box-shadow: none;
        }

        .form-title {
            font-size: 1.5rem;
            font-weight: 300;
            color: white;
            text-align: center;
            margin-bottom: 0.5rem;
            font-family: 'Kanit', sans-serif;
        }

        .form-subtitle {
            color: #888888;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 0.875rem;
            font-weight: 200;
            font-family: 'Kanit', sans-serif;
        }

        .verification-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .verification-card.completed {
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.05);
        }

        .verification-card.pending {
            border-color: var(--border-color);
            background: var(--card-bg);
        }

        /* Limit hidden utility to page containers only */

        /* Ensure all page containers are block-level by default */
        [id$="-page"] { display: block; min-height: 100vh; }

        [id$="-page"].hidden {
            display: none !important;
        }

        /* Hide footers only when their parent page container is hidden */
        [id$="-page"].hidden footer {
            display: none !important;
        }

        /* Never hide global modal/backdrop by .hidden rule */
        #wallet-modal.show, #wallet-backdrop.show {
            display: flex !important; /* modal */
        }
        #wallet-backdrop.show {
            display: block !important; /* backdrop */
        }

        .metric-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .metric-label {
            font-size: 14px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Proof of Humanity Page Styles */
        .proof-container {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            padding-top: 6rem; /* Add space for fixed nav bar */
            text-align: center;
        }

        /* 確保 Proof of Humanity 頁面結構正確 */
        #proof-page {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        #proof-page .page-content-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        #proof-page footer {
            margin-top: auto;
            position: relative;
            z-index: 10;
        }

        .proof-title {
            font-size: 3rem;
            font-weight: 300;
            color: white;
            margin-bottom: 1.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            font-family: 'Kanit', sans-serif;
        }

        .proof-subtitle {
            margin-bottom: 3rem;
            max-width: 600px;
        }

        .cta-main {
            font-size: 24px;
            color: white;
            font-weight: 300;
            line-height: 1.4;
            margin-bottom: 1rem;
            font-family: 'Kanit', sans-serif;
        }

        .cta-description {
            font-size: 16px;
            color: #888888;
            line-height: 1.6;
            font-weight: 200;
            font-family: 'Kanit', sans-serif;
        }

        .verification-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
            max-width: 500px;
            margin-bottom: 0;
        }

        .verification-step {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .verification-step.completed {
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
        }

        .step-content {
            display: flex;
            align-items: center; /* vertically center step-info and button */
            justify-content: flex-start; /* keep a fixed spacing (we add margin-left on button) */
        }

        .step-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;        /* allow text to take remaining width */
            min-width: 0;   /* enable wrapping instead of overflowing */
        }

        .step-number {
            width: 2rem;
            height: 2rem;
            background: transparent;
            border: 1px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 300; /* requested weight */
            font-size: 0.875rem;
        }


        /* Keep 16px spacing to button while allowing text wrap */
        .step-text {
            margin-right: 0 !important;
            white-space: normal;
            word-break: break-word;
        }
        .step-content .page-action-button { margin-left: 16px; }

        .verification-step.completed .step-number {
            background: #ffffff; /* white bg */
            color: #000000;      /* black text */
            border-color: #ffffff;
        }

        .step-text {
            color: white;
            font-size: 16px; /* explicit */
            font-weight: 300;
            font-family: 'Kanit', sans-serif;
        }

        .step-status {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .step-status.completed {
            background: transparent; /* icon will convey state */
            color: #000000;      /* ensure text/icon black if any */
            flex: none;
        }
        .step-status.completed .check-icon {
            color: #000000;
        }
        /* Keep 16px spacing between completed icon and step text */
        .verification-step.completed .step-content { column-gap: 16px; }


        /* Responsive layout for verification steps to prevent squishing */
        @media (max-width: 768px) {
            .verification-steps { gap: 0.75rem; }
            .verification-step { padding: 1rem; }
            .step-content { flex-direction: column; align-items: stretch; }
            .step-info { width: 100%; align-items: flex-start; }
            .step-content .page-action-button { margin-left: 0; margin-top: 12px; align-self: flex-start; }
        }

        /* Slightly earlier wrap on tablets */
        @media (max-width: 920px) and (min-width: 769px) {
            .step-content { flex-wrap: wrap; row-gap: 10px; }
            .step-info { min-width: 260px; }
            .step-content .page-action-button { margin-left: 16px; }
        }

        /* Mobile + Tablet layout: vertical stack, centered, full-width button */
        @media (max-width: 1024px) {
            .step-content { flex-direction: column; align-items: center; }
            .step-info { width: 100%; flex-direction: column; align-items: center; gap: 0.5rem; }
            .step-number { margin-bottom: 8px; }
            .step-text { text-align: center; margin-right: 0 !important; }
            .step-content .page-action-button { width: 100%; margin-left: 0; margin-top: 12px; }

            /* Make step1 button full-width on mobile/tablet */
            .step-content #step1-btn { width: 100%; }

            /* Completed state: 16px vertical gap between icon and text on mobile/tablet */
            .verification-step.completed .step-content { column-gap: 0; row-gap: 16px; }
            .verification-step.completed .step-info { gap: 16px; }
        }

        /* Allow long subtext to wrap */
        .step-subtext { white-space: normal !important; word-break: break-word; overflow-wrap: anywhere; display: inline; }



        .check-icon {
            width: 1rem;
            height: 1rem;
            color: white;
            background: transparent;
            display: inline-block;
        }

        .start-btn {
            border: 1px solid #373737;
            color: black;
            background: white;
            border-radius: 8px;
            padding: 0.5rem 1.5rem;
            font-weight: 300;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Kanit', sans-serif;
        }

        .start-btn:hover {
            background: transparent;
            color: white;
            border-color: white;
            transform: translateY(-1px);
        }

        .get-started-btn {
            border: 1px solid #373737;
            color: #9CA3AF;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem 3rem;
            font-size: 1rem;
            font-weight: 300;
            cursor: not-allowed;
            transition: all 0.3s ease;
            font-family: 'Kanit', sans-serif;
        }

        .get-started-btn:not(:disabled) {
            background: white;
            color: black;
            cursor: pointer;
            border-color: #373737;
        }

        .get-started-btn:not(:disabled):hover {
            background: transparent;
            color: white;
            border-color: white;
            transform: translateY(-2px);
        }

        .get-started-btn.completed {
            background: white;
            color: black;
            cursor: pointer;
            border-color: #373737;
        }

        /* Consistent button styles across all pages */
        .btn-secondary {
            border-radius: 12px;
            font-weight: 300;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            font-family: 'Kanit', sans-serif;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: white;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        /* Card styles consistency */
        .card, .welcome-form, .verification-step {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .card:hover, .welcome-form:hover {
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Material Icons styling */
        .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            -webkit-font-feature-settings: 'liga';
            -webkit-font-smoothing: antialiased;
            vertical-align: middle;
        }

        /* Icon size variants */
        .material-icons.icon-sm {
            font-size: 16px;
            width: 16px;
            height: 16px;
        }

        .material-icons.icon-md {
            font-size: 20px;
            width: 20px;
            height: 20px;
        }

        .material-icons.icon-lg {
            font-size: 24px;
            width: 24px;
            height: 24px;
        }

        /* Default size */
        .material-icons:not(.icon-sm):not(.icon-md):not(.icon-lg) {
            font-size: 20px;
            width: 20px;
            height: 20px;
        }

        /* Platform logos */
        .platform-logo {
            width: 20px;
            height: 20px;
            display: inline-block;
        }

        /* 錢包模態框樣式 - 仿照截圖設計 */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            z-index: 3999;
            backdrop-filter: blur(4px);
        }
        .modal-backdrop.show {
            display: block !important;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 4001;
            padding: 20px;
        }
        .modal.show {
            display: flex !important;
        }

        /* 主要模態框卡片 - 完美居中，自適應內容 */
        .wallet-modal-card {
            background: #1a1a1a;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            width: auto;
            min-width: 520px;
            max-width: 600px;
            height: auto;
            min-height: 450px;
            overflow: visible;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        /* 關閉按鈕 */
        .wallet-close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s ease;
            z-index: 10;
        }
        .wallet-close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        /* 模態框標題 */
        .wallet-modal-title {
            color: #fff;
            font-size: 20px;
            font-weight: 300;
            text-align: center;
            padding: 20px 24px 16px 24px;
            margin: 0;
        }

        /* 主要內容區域 - 自適應高度 */
        .wallet-modal-content {
            display: flex;
            min-height: 380px;
            height: auto;
        }

        /* 左側錢包選項區域 */
        .wallet-options-section {
            flex: 1;
            padding: 20px 24px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 240px;
        }

        .wallet-section-title {
            color: #3b82f6;
            font-size: 14px;
            font-weight: 300;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* 錢包選項項目 */
        .wallet-option-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.02);
        }
        .wallet-option-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }
        .wallet-option-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }
        .get-wallet-btn.disabled,
        .get-wallet-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            pointer-events: none;
        }

        .wallet-option-icon {
            margin-right: 12px;
        }

        .wallet-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
        }

        .wallet-option-info {
            flex: 1;
        }

        .wallet-name {
            color: #fff;
            font-size: 16px;
            font-weight: 300;
            display: block;
        }

        .wallet-status {
            color: #888;
            font-size: 12px;
            display: block;
            margin-top: 2px;
        }

        /* 右側錢包介紹區域 */
        .wallet-info-section {
            flex: 1;
            padding: 20px 24px;
            background: rgba(255, 255, 255, 0.02);
            min-width: 240px;
        }

        .wallet-info-title {
            color: #fff;
            font-size: 18px;
            font-weight: 300;
            margin-bottom: 20px;
        }

        /* 功能介紹卡片 */
        .wallet-feature-card {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            padding: 16px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .wallet-feature-icon {
            margin-right: 12px;
            flex-shrink: 0;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
        }

        .wallet-feature-content {
            flex: 1;
        }

        .wallet-feature-title {
            color: #fff;
            font-size: 14px;
            font-weight: 300;
            margin-bottom: 4px;
        }

        .wallet-feature-desc {
            color: #888;
            font-size: 12px;
            font-weight: 200;
            line-height: 1.4;
            margin: 0;
        }

        /* 獲取錢包按鈕 */
        .get-wallet-btn {
            width: 100%;
            background: #3b82f6;
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 300;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 16px;
        }
        .get-wallet-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        /* 了解更多鏈接 */
        .learn-more-link {
            display: block;
            text-align: center;
            color: #3b82f6;
            font-size: 14px;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .learn-more-link:hover {
            color: #60a5fa;
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            .wallet-modal-card {
                width: 92vw;
                min-width: 0;
                min-height: auto;
                height: auto;
                max-height: 80vh;
                margin: 10px;
        /* User Info Page Styles */
        .user-info-form {
            max-width: 500px;
        }

        .form-section {
            margin-bottom: 1.5rem;
        }

        .form-label {
            font-family: 'Kanit', sans-serif;
            font-weight: 300;
            margin-bottom: 0.5rem;
            display: block;
        }

        .profession-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .career-badge {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            color: white;
            font-size: 0.875rem;
            font-weight: 300;
            font-family: 'Kanit', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: 48px;
        }

        .career-badge:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .career-badge.selected {
            background: rgba(255, 255, 255, 0.9);
            color: #000000;
            border-color: rgba(255, 255, 255, 0.9);
        }

        .career-badge.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        .career-badge .material-icons {
            font-size: 1rem;
        }

        /* Responsive adjustments for profession grid */
        @media (max-width: 768px) {
            .profession-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 0.5rem;
            }

            .career-badge {
                padding: 0.5rem 0.75rem;

                font-size: 0.8rem;
                min-height: 44px;
            }
        }
            }

            .wallet-modal-content {
                flex-direction: column;
                height: auto;
            }

            .wallet-options-section {
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                padding-bottom: 20px;
            }

            .wallet-info-section {
                padding-top: 20px;
            }
        }

        /* Progress Stepper styles (site theme) */
        .progress-stepper { --bar: rgba(255,255,255,0.3); --bar-active: rgba(255,255,255,0.9); --dot: rgba(255,255,255,0.6); --dot-active: #ffffff; }
        .progress-stepper .bar { flex: 1; height: 3px; background: var(--bar); border-radius: 9999px; }
        .progress-stepper .bar.active { background: var(--bar-active); }
        .progress-stepper .step { display: flex; align-items: center; }
        .progress-stepper .circle { width: 28px; height: 28px; border-radius: 50%; background: var(--dot); position: relative; display: grid; place-items: center; }
        .progress-stepper .step.current .circle { background: transparent; box-shadow: 0 0 0 2px rgba(255,255,255,0.7), inset 0 0 0 6px var(--dot-active); }
        .progress-stepper .step.done .circle { background: var(--dot-active); }
        .progress-stepper .check { width: 16px; height: 16px; color: #0a0a0a; display: none; }
        .progress-stepper .step.done .check { display: block; color: #0a0a0a; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

        /* User info badges */
        .badge-grid { display: flex; flex-wrap: wrap; gap: 10px; }
        .career-badge { display: inline-flex; align-items: center; gap: 8px; padding: 8px 14px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.15); background: rgba(255,255,255,0.06); color: white; cursor: pointer; user-select: none; }
        .career-badge:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.25); }
        .career-badge.selected { background: rgba(255, 255, 255, 0.2); color: white; border-color: rgba(255, 255, 255, 0.3); }
        .career-badge.disabled { opacity: 0.5; cursor: not-allowed; }

    </style>
</head>
<body class="grid-bg">
    <!-- Global Navigation Bar - 全域導航 -->
    <nav id="global-nav" class="nav-bar">
        <a href="https://twin3.ai" class="nav-logo">
            <div class="flex items-center">
                <img src="assets/img/logo_dark.svg" alt="Logo" class="w-10 h-10 md:w-10 md:h-10">
            </div>
        </a>

        <!-- Mobile menu button -->
        <div class="mobile-menu-btn">
            <button class="text-white">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 7.5h16.5M3.75 12h16.5m-16.5 4.5h16.5"></path>
                </svg>
            </button>
        </div>

        <!-- Desktop navigation -->
        <div class="nav-actions">
            <a href="https://ieeexplore.ieee.org/document/10734204" target="_blank" rel="noreferrer noopener" class="nav-link">WHITEPAPER</a>
            <a class="nav-link" href="https://twin3.ai/dashboard">MY TWIN</a>
            <span class="nav-link nav-link-focused" aria-current="page">PASSPORT</span>

            <!-- Wallet button -->
            <div class="wallet-button">
                <div class="wallet-balance">0 BNB</div>
                <div class="wallet-address">
                    <div class="wallet-avatar">👽</div>
                    <div class="wallet-address-text">0x19…5ACe</div>
                    <svg class="dropdown-icon" fill="none" height="7" width="14" xmlns="http://www.w3.org/2000/svg">
                        <title>Dropdown</title>
                        <path d="M12.75 1.54001L8.51647 5.0038C7.77974 5.60658 6.72026 5.60658 5.98352 5.0038L1.75 1.54001" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"></path>
                    </svg>
                </div>
            </div>
        </div>
    </nav>

    <!-- Welcome Page -->
    <div id="welcome-page" class="relative min-h-screen">
        <!-- Video Background -->
        <video class="absolute top-0 left-0 w-full h-full object-cover" autoplay loop muted playsinline style="z-index: 1;">
            <source src="assets/img/v2.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <!-- Welcome Content -->
        <div class="welcome-container">
            <!-- Unified Content Block (Left + Right combined with backdrop blur) -->
            <div class="unified-content-block page-unified-content backdrop-blur-sm rounded-lg p-8 w-full flex flex-col lg:flex-row items-stretch justify-between gap-8 min-h-fit md:items-center md:justify-center lg:items-stretch lg:justify-between">
                <!-- Left Content (Title + Description) -->
                <div class="left-content page-left-content flex-1 max-w-2xl flex flex-col justify-center lg:justify-start text-center lg:text-left">
                    <h1 class="main-title text-white text-4xl md:text-6xl lg:text-7xl xl:text-8xl leading-tight mb-4" style="font-weight: 300;">
                        Welcome to<br>
                        Twin3 Passport!
                    </h1>
                    <p class="subtitle text-[#888888] text-xl md:text-2xl lg:text-3xl mb-8" style="font-weight: 200;">Your digital identity, supercharged!</p>
                    <p class="description text-gray-300 text-base md:text-lg mb-6" style="font-weight: 200;">
                        Start the process to obtain your Passport and begin your mission.<br>
                        Connect your wallet to unlock your digital identity.
                    </p>
                </div>

                <!-- Right Action (Registration Card) -->
<div class="right-action page-right-action flex flex-col justify-center lg:justify-between items-center text-center relative overflow-hidden rounded-lg border border-white border-opacity-20 hover:border-opacity-100 hover:shadow-lg hover:shadow-white transition-all duration-300 flex-shrink-0 w-full lg:w-auto lg:min-w-fit self-stretch space-y-6 lg:space-y-0" style="padding: 32px;">
                    <p class="card-description text-[#888888] whitespace-normal lg:whitespace-nowrap text-base md:text-lg" style="font-weight: 200;">Free gas to mint your Twin NFT for AI agents.</p>
                    <h1 class="card-number text-white text-6xl lg:text-7xl leading-none uppercase" style="font-weight: 300;">1824</h1>
                    <button id="free-mint-btn" class="page-action-button action-button w-full px-4 py-3 border border-[#373737] text-black bg-white rounded-lg hover:bg-transparent hover:text-white hover:border-white transition duration-300" style="font-weight: 300;">Get Your Passport</button>
                </div>
            </div>

        </div>

    </div>

        <!-- Hidden original form -->
            <div class="hidden">
                <div class="space-y-4 hidden">
                    <div class="input-wrapper" id="username-wrapper">
                        <input
                            type="text"
                            id="username"
                            class="input-field"
                            placeholder="User Name"
                        >
                        <button type="button" class="input-clear" id="username-clear">
                            <span class="material-icons icon-sm">close</span>
                        </button>
                    </div>

                    <div class="custom-select" id="career-select">
                        <div class="custom-select-trigger" id="career-trigger">
                            <span class="custom-select-selected" id="career-selected">
                                <span>What's your career</span>
                            </span>
                            <span class="material-icons">expand_more</span>
                        </div>
                        <div class="custom-select-options" id="career-options">
                            <div class="custom-select-option" data-value="creative">
                                <span class="material-icons">palette</span>
                                <span>Creative Content Maker</span>
                            </div>
                            <div class="custom-select-option" data-value="developer">
                                <span class="material-icons">code</span>
                                <span>Developer</span>
                            </div>
                            <div class="custom-select-option" data-value="researcher">
                                <span class="material-icons">psychology</span>
                                <span>Research & Innovation Expert</span>
                            </div>
                            <div class="custom-select-option" data-value="web3">
                                <span class="material-icons">language</span>
                                <span>Web3 Network Pioneer</span>
                            </div>
                            <div class="custom-select-option" data-value="influencer">
                                <span class="material-icons">groups</span>
                                <span>Social Influencer</span>
                            </div>
                            <div class="custom-select-option" data-value="gamer">
                                <span class="material-icons">sports_esports</span>
                                <span>Gamer</span>
                            </div>
                            <div class="custom-select-option" data-value="artist">
                                <span class="material-icons">brush</span>
                                <span>Artist</span>
                            </div>
                            <div class="custom-select-option" data-value="entrepreneur">
                                <span class="material-icons">business_center</span>
                                <span>Entrepreneur</span>
                            </div>
                            <div class="custom-select-option" data-value="educator">
                                <span class="material-icons">school</span>

                                <span>Educator</span>
                            </div>
                            <div class="custom-select-option" data-value="healthcare">
                                <span class="material-icons">local_hospital</span>
                                <span>Healthcare Professional</span>
                            </div>
                            <div class="custom-select-option" data-value="athlete">
                                <span class="material-icons">emoji_events</span>
                                <span>Athlete</span>
                            </div>
                            <div class="custom-select-option" data-value="writer">
                                <span class="material-icons">edit</span>
                                <span>Writer</span>
                            </div>
                            <div class="custom-select-option" data-value="software-engineer">
                                <span class="material-icons">computer</span>
                                <span>Software Engineer</span>
                            </div>
                            <div class="custom-select-option" data-value="data-scientist">
                                <span class="material-icons">analytics</span>
                                <span>Data Scientist</span>
                            </div>
                            <div class="custom-select-option" data-value="product-manager">
                                <span class="material-icons">track_changes</span>
                                <span>Product Manager</span>
                            </div>
                            <div class="custom-select-option" data-value="designer">
                                <span class="material-icons">design_services</span>
                                <span>UX/UI Designer</span>
                            </div>
                            <div class="custom-select-option" data-value="marketing">
                                <span class="material-icons">campaign</span>
                                <span>Marketing Specialist</span>
                            </div>
                        </div>
                        <input type="hidden" id="career" name="career" value="">
                    </div>

                    <button id="next-btn" class="btn-primary mt-6" disabled>
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer Section -->
        <footer class="bg-black text-white px-8 py-10 xl:pr-20 lg:px-0 lg:py-12" style="position: relative; z-index: 5;">
            <div class="flex flex-col-reverse lg:flex-row xl:justify-between items-start space-y-10 lg:space-y-0">
                <!-- Logo Section -->
                <div class="w-full xl:w-1/5 lg:w-[13%] text-center lg:text-left">
                    <div class="flex flex-col justify-center lg:justify-start items-center pt-6 lg:pt-0" style="gap: 4px;">
                        <div class="flex items-center">
                            <img src="assets/img/logo_dark.svg" alt="Logo" style="width: 40px; height: 40px;">
                        </div>
                        <span class="text-sm md:text-base" style="font-weight: 300; color: #888888;">twin3.ai</span>
                    </div>
                </div>

                <!-- Links Section -->
                <div class="flex flex-wrap lg:flex-nowrap w-full lg:w-2/4 lg:space-x-10">
                    <!-- Social Media -->
                    <div class="w-full md:w-1/3 text-center lg:text-left flex-row">
                        <h5 class="uppercase text-sm lg:text-base" style="font-weight: 300; color: white; padding-bottom: 12px;">Social Media</h5>
                        <div class="flex justify-center lg:justify-start space-x-4">
                            <a href="https://x.com/twin3_ai" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <div class="w-6 h-6 flex items-center justify-center" style="padding: 2px;">
                                    <img src="assets/img/X_logo.svg" alt="X (Twitter)" class="w-full h-full object-contain">
                                </div>
                            </a>
                            <a href="https://opensea.io/collection/twin3" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <img src="assets/img/opensea_logo.svg" alt="OpenSea" class="w-6 h-6">
                            </a>
                            <a href="https://warpcast.com/twin3.eth" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <img src="assets/img/farcaster_logo.svg" alt="Warpcast" class="w-6 h-6">
                            </a>
                        </div>
                    </div>

                    <!-- Resource -->
                    <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-2 pt-4 md:pt-0">
                        <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Resource</h5>
                        <ul class="space-y-2">
                            <li><a href="https://ieeexplore.ieee.org/document/10734204" target="_blank" rel="noreferrer noopener" class="text-[#888888] hover:text-white text-sm lg:text-base" style="font-weight: 200;">Whitepaper</a></li>
                            <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/tasks/1" style="font-weight: 200;">Tasks</a></li>
                        </ul>
                    </div>

                    <!-- Features -->
                    <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-10 pt-4 md:pt-0">
                        <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Features</h5>
                        <ul class="space-y-2">
                            <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/dashboard" style="font-weight: 200;">My Twin</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Newsletter Section -->
                <div class="w-full lg:w-1/4 text-center lg:text-left space-y-5">
                    <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Subscribe to Twin3 Newsletter</h5>
                    <div class="flex flex-col lg:flex-row items-center lg:space-x-2 space-y-4 lg:space-y-0">
                        <a href="https://www.linkedin.com/company/twin3-ai" target="_blank" rel="noreferrer noopener" class="px-4 py-2 border border-[#373737] text-black bg-white rounded-lg hover:bg-transparent hover:text-white hover:border-white transition duration-300 text-sm lg:text-base" style="font-weight: 300;">Subscribe</a>
                    </div>
                </div>
            </div>

            <!-- Copyright -->
            <div class="mt-10 text-center text-gray-500 text-sm lg:text-base" style="font-weight: 200;">© 2025 Twin3.ai v1.0.6</div>
        </footer>
    </div>

    <!-- Proof of Humanity Page -->
    <div id="proof-page" class="relative min-h-screen hidden">
        <!-- Video Background -->
        <video class="absolute top-0 left-0 w-full h-full object-cover" autoplay loop muted playsinline style="z-index: 1;">
            <source src="assets/img/v2.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <!-- Proof Content -->
        <div class="page-content-container">
            <!-- Unified Content Block -->
            <div class="page-unified-content">
                <!-- Left Content (Title + Description) -->
                <div class="page-left-content">
                    <h1 class="page-main-title main-title text-white text-4xl md:text-6xl lg:text-7xl xl:text-8xl leading-tight mb-4">
                        Proof of<br>
                        Humanity
                    </h1>
                    <p class="page-subtitle subtitle text-[#888888] text-xl md:text-2xl lg:text-3xl mb-8">You must prove you are not a robot to join us</p>
                    <p class="page-description description text-gray-300 text-base md:text-lg mb-6">
                        You only need to complete ONE of the following verifications to continue.<br>
                        Choose either Step 1 (Google reCAPTCHA) or Step 2 (Biometric). No personal data is stored.
                    </p>
                </div>

                <!-- Right Action (Verification Steps) -->
                <div class="page-right-action">
                    <!-- Verification Steps -->



                    <div class="verification-steps w-full">
                        <!-- Step 1: Google reCAPTCHA -->
                        <div class="verification-step" id="step1">
                            <div class="step-content flex w-full">
                                <div class="step-info flex">
                                    <div class="step-number w-8 h-8 text-white rounded-full flex items-center justify-center text-sm">1</div>
                                    <span class="step-text text-white">Google reCAPTCHA v2</span>
                                </div>
                                <button class="page-action-button start-btn" id="step1-btn">Start</button>
                            </div>
                        </div>

                        <!-- Step 2: Mobile Authentication -->
                        <div class="verification-step" id="step2">
                            <div class="step-content flex w-full">
                                <div class="step-info flex">
                                    <div class="step-number w-8 h-8 text-white rounded-full flex items-center justify-center text-sm">2</div>
                                    <span class="step-text text-white">Apple/Google Biometric <span class="step-subtext" style="color:#9CA3AF; font-size:12px; font-weight:200; padding-left:2px;">(Face/Touch ID)</span></span>
                                </div>
                                <button class="page-action-button start-btn" id="start-mobile-auth">Start</button>
                            </div>
                        </div>
                    </div>

                    <!-- Get Started Button -->
                    <button id="get-started-btn" class="page-action-button action-button w-full px-4 py-3 border border-[#373737] text-black bg-white rounded-lg hover:bg-transparent hover:text-white hover:border-white transition duration-300" disabled
                        onclick="(function(){try{var btn=document.getElementById('get-started-btn'); if(btn && btn.disabled) return; var proof=document.getElementById('proof-page'); if(proof) proof.classList.add('hidden'); var u=document.getElementById('user-info-page'); if(u){u.classList.remove('hidden'); u.style.display='block'; var c=u.querySelector('.page-content-container'); if(c) c.style.display='flex';} var all=document.querySelectorAll('footer'); all.forEach(function(f){var pp=f.closest('[id$=\'-page\']'); f.style.display=(pp&&pp.id==='user-info-page')?'':'none';}); window.scrollTo(0,0);}catch(e){console.error(e);}})();">
                        Next
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer Section -->
        <footer class="bg-black text-white px-8 py-10 xl:pr-20 lg:px-0 lg:py-12" style="position: relative; z-index: 5;">
            <div class="flex flex-col-reverse lg:flex-row xl:justify-between items-start space-y-10 lg:space-y-0">
                <!-- Logo Section -->
                <div class="w-full xl:w-1/5 lg:w-[13%] text-center lg:text-left">
                    <div class="flex flex-col justify-center lg:justify-start items-center pt-6 lg:pt-0" style="gap: 4px;">
                        <div class="flex items-center">
                            <img src="assets/img/logo_dark.svg" alt="Logo" style="width: 40px; height: 40px;">
                        </div>
                        <span class="text-sm md:text-base" style="font-weight: 300; color: #888888;">twin3.ai</span>
                    </div>
                </div>

                <!-- Links Section -->
                <div class="flex flex-wrap lg:flex-nowrap w-full lg:w-2/4 lg:space-x-10">
                    <!-- Social Media -->
                    <div class="w-full md:w-1/3 text-center lg:text-left flex-row">
                        <h5 class="uppercase text-sm lg:text-base" style="font-weight: 300; color: white; padding-bottom: 12px;">Social Media</h5>
                        <div class="flex justify-center lg:justify-start space-x-4">
                            <a href="https://x.com/twin3_ai" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <div class="w-6 h-6 flex items-center justify-center" style="padding: 2px;">
                                    <img src="assets/img/X_logo.svg" alt="X (Twitter)" class="w-full h-full object-contain">
                                </div>
                            </a>
                            <a href="https://opensea.io/collection/twin3" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <img src="assets/img/opensea_logo.svg" alt="OpenSea" class="w-6 h-6">
                            </a>
                            <a href="https://warpcast.com/twin3.eth" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <img src="assets/img/farcaster_logo.svg" alt="Warpcast" class="w-6 h-6">
                            </a>
                        </div>
                    </div>

                    <!-- Resource -->
                    <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-2 pt-4 md:pt-0">
                        <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Resource</h5>
                        <ul class="space-y-2">
                            <li><a href="https://ieeexplore.ieee.org/document/10734204" target="_blank" rel="noreferrer noopener" class="text-[#888888] hover:text-white text-sm lg:text-base" style="font-weight: 200;">Whitepaper</a></li>
                            <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/tasks/1" style="font-weight: 200;">Tasks</a></li>
                        </ul>
                    </div>

                    <!-- Features -->
                    <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-10 pt-4 md:pt-0">
                        <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Features</h5>
                        <ul class="space-y-2">
                            <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/dashboard" style="font-weight: 200;">My Twin</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Newsletter Section -->
                <div class="w-full lg:w-1/4 text-center lg:text-left space-y-5">
                    <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Subscribe to Twin3 Newsletter</h5>
                    <div class="flex flex-col lg:flex-row items-center lg:space-x-2 space-y-4 lg:space-y-0">
                        <a href="https://www.linkedin.com/company/twin3-ai" target="_blank" rel="noreferrer noopener" class="px-4 py-2 border border-[#373737] text-black bg-white rounded-lg hover:bg-transparent hover:text-white hover:border-white transition duration-300 text-sm lg:text-base" style="font-weight: 300;">Subscribe</a>
                    </div>
                </div>
            </div>

            <!-- Copyright -->
            <div class="mt-10 text-center text-gray-500 text-sm lg:text-base" style="font-weight: 200;">© 2025 Twin3.ai v1.0.6</div>
        </footer>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="relative min-h-screen hidden">
        <!-- Video Background -->
        <video class="absolute top-0 left-0 w-full h-full object-cover" autoplay loop muted playsinline style="z-index: 1;">
            <source src="assets/img/v2.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <!-- Dashboard Content -->
        <div class="px-6 py-8 pt-24">
        <div class="max-w-6xl mx-auto">
            <!-- Section 1: Profile Header -->
            <div class="card p-6 mb-6">
                <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-4 lg:space-y-0">
                    <div class="flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 w-full lg:w-auto">
                        <!-- Profile Photo (Editable) -->
                        <div class="relative">
                            <div class="w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center cursor-pointer hover:opacity-80 transition-opacity">
                                <span class="text-white text-2xl font-bold">A</span>
                            </div>
                            <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-gray-700 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-600 transition-colors">
                                <span class="material-icons icon-sm text-white">edit</span>
                            </div>
                        </div>

                        <!-- User Info -->
                        <div>
                            <h1 id="dashboard-title" class="text-2xl text-white mb-1" style="font-weight: 300;">Hi, User!</h1>
                            <div class="flex items-center space-x-3 mb-2">
                                <!-- Profession -->
                                <div class="flex items-center space-x-2 px-3 py-1 bg-gray-700 rounded-full">
                                    <span id="career-type" class="text-white text-sm font-medium">Developer</span>
                                </div>
                                <!-- Title -->
                                <div class="flex items-center space-x-2 px-3 py-1 bg-green-600 rounded-full">
                                    <span class="material-icons icon-sm text-white">star</span>
                                    <span class="text-white text-sm font-medium">Code Architect</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- $twin3 Balance & Actions -->
                    <div class="flex flex-wrap items-center gap-3 w-full lg:w-auto justify-start lg:justify-end">
                        <!-- $twin3 Balance Display -->
                        <div class="flex items-center bg-gray-800 rounded-full px-4 py-2 border border-gray-600">
                            <span class="material-icons icon-sm text-white mr-2">monetization_on</span>
                            <span class="text-white font-bold text-lg">0.247</span>
                            <span class="text-gray-400 text-sm ml-1">$twin3</span>
                        </div>

                        <!-- Language Selector -->
                        <div class="relative">
                            <button class="flex items-center space-x-2 px-3 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors">
                                <span class="material-icons icon-sm text-white">language</span>
                                <span class="text-white text-sm">EN</span>
                                <span class="material-icons icon-sm text-white">expand_more</span>
                            </button>
                        </div>

                        <!-- Notifications -->
                        <div class="relative">
                            <button class="p-2 hover:bg-gray-700 rounded-lg transition-colors">
                                <span class="material-icons icon-sm text-white">notifications</span>
                                <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Scores & Metrics -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Twin Matrix Score -->
                <div class="card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold text-white flex items-center space-x-2">
                            <span class="material-icons icon-md text-white">psychology</span>
                            <span>Global Identity Score</span>
                        </h2>
                        <div class="relative group">
                            <span class="material-icons icon-sm text-gray-400 cursor-help">help_outline</span>
                            <div class="absolute right-0 top-6 w-80 p-3 bg-gray-800 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 text-xs text-gray-300">
                                <div class="font-semibold mb-2">Calculation Formula:</div>
                                <div class="mb-2 font-mono text-blue-400">Wi = (0.25Hi + 0.25Bi + 0.30Di + 0.20Si)^1.2</div>
                                <div>Hi (Humanity Integration): 0-63</div>
                                <div>Bi (Blockchain Behavior): 0-63</div>
                                <div>Di (Digital Asset Stickiness): 0-63</div>
                                <div>Si (Social Contribution): 0-63</div>
                                <div class="mt-2 font-semibold">Total Score Range: 0-266</div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-bold text-white mb-2">187<span class="text-2xl text-gray-400"> / 266</span></div>
                        <div class="progress-bar">
                            <div class="progress-fill bg-green-500" style="width: 70%"></div>
                        </div>
                        <div class="text-xs text-gray-400 mt-2">70% of maximum score</div>


                    </div>
                </div>



                <!-- Profession Trait Scores -->
                <div class="card p-6">
                    <h2 class="text-lg font-semibold text-white mb-4 flex items-center space-x-2">
                        <span class="material-icons icon-md text-white">bar_chart</span>
                        <span>Developer Traits</span>
                    </h2>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-white text-sm">Programming Skills</span>
                                <span class="text-white text-sm font-bold">240</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill bg-green-500" style="width: 80%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-white text-sm">Cybersecurity Awareness</span>
                                <span class="text-white text-sm font-bold">185</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill bg-green-500" style="width: 62%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-white text-sm">Technical Innovation</span>
                                <span class="text-white text-sm font-bold">210</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill bg-green-500" style="width: 70%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-white text-sm">Code Quality</span>
                                <span class="text-white text-sm font-bold">195</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill bg-green-500" style="width: 65%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Account Approval -->
            <div class="card p-6 mb-6">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-3">
                        <span class="material-icons icon-md text-green-400">link</span>
                        <div>
                            <h2 class="text-xl font-bold text-white">Account Approval</h2>
                            <p class="text-gray-400 text-sm">Connect required accounts for Developer verification</p>
                        </div>
                    </div>
                    <div class="text-green-400 text-sm font-semibold">
                        1/3 Required Connected
                    </div>
                </div>

                <!-- Required Accounts -->
                <div class="mb-6">
                    <h3 class="text-white font-semibold mb-4 flex items-center">
                        <span class="w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                        Required Accounts
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- GitHub - Connected -->
                        <div class="card p-4">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-gray-700 rounded flex items-center justify-center">
                                        <svg class="platform-logo" viewBox="0 0 24 24" fill="white">
                                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white text-sm">GitHub</h4>
                                        <p class="text-xs text-green-400">@alexchen</p>
                                    </div>
                                </div>
                                <div class="text-green-400">
                                    <span class="material-icons icon-sm">check</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between text-xs">
                                <span class="px-2 py-1 bg-gray-700 text-green-400 rounded-full">Connected</span>
                            </div>
                        </div>

                        <!-- Stack Overflow - Not Connected -->
                        <div class="card p-4">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-gray-700 rounded flex items-center justify-center">
                                        <span class="material-icons icon-sm">help</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white text-sm">Stack Overflow</h4>
                                        <p class="text-xs text-gray-500">Not connected</p>
                                    </div>
                                </div>
                                <div class="text-gray-400">
                                    <span class="material-icons icon-sm">add</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between text-xs">
                                <button class="btn-secondary text-xs" style="width: auto; padding: 4px 12px;">
                                    Connect
                                </button>
                            </div>
                        </div>

                        <!-- LinkedIn - Not Connected -->
                        <div class="card p-4">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-gray-700 rounded flex items-center justify-center">
                                        <svg class="platform-logo" viewBox="0 0 24 24" fill="white">
                                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-white text-sm">LinkedIn</h4>
                                        <p class="text-xs text-gray-500">Not connected</p>
                                    </div>
                                </div>
                                <div class="text-gray-400">
                                    <span class="material-icons icon-sm">add</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between text-xs">
                                <button class="btn-secondary text-xs" style="width: auto; padding: 4px 12px;">
                                    Connect
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recommended Accounts -->
                <div>
                    <h3 class="text-white font-semibold mb-4 flex items-center">
                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                        Recommended Accounts
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <div class="card p-3 text-center hover:border-gray-500 cursor-pointer">
                            <div class="flex justify-center mb-2">
                                <svg class="platform-logo" viewBox="0 0 24 24" fill="white">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                            </div>
                            <div class="text-xs text-white font-medium">X (Twitter)</div>
                        </div>
                        <div class="card p-3 text-center hover:border-gray-500 cursor-pointer">
                            <div class="flex justify-center mb-2">
                                <svg class="platform-logo" viewBox="0 0 24 24" fill="white">
                                    <path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z"/>
                                </svg>
                            </div>
                            <div class="text-xs text-white font-medium">Medium</div>
                        </div>
                        <div class="card p-3 text-center hover:border-gray-500 cursor-pointer">
                            <div class="flex justify-center mb-2">
                                <svg class="platform-logo" viewBox="0 0 24 24" fill="white">
                                    <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0002 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9554 2.4189-2.1568 2.4189Z"/>
                                </svg>
                            </div>
                            <div class="text-xs text-white font-medium">Discord</div>
                        </div>
                        <div class="card p-3 text-center hover:border-gray-500 cursor-pointer">
                            <div class="flex justify-center mb-2">
                                <svg class="platform-logo" viewBox="0 0 24 24" fill="white">
                                    <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                                </svg>
                            </div>
                            <div class="text-xs text-white font-medium">YouTube</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Task List & Rewards -->
            <div class="card p-6">
                <!-- Tab Navigation -->
                <div class="flex items-center justify-between mb-6">
                    <div class="flex space-x-1 rounded-lg p-1" style="background: #FFFFFF0D;">
                        <button id="task-tab" class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md transition-colors">
                            Task List
                        </button>
                        <button id="rewards-tab" class="px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors">
                            Rewards Logs
                        </button>
                    </div>
                    <div class="text-green-400 text-sm font-semibold">
                        <span id="active-count">5 Active Tasks</span>
                    </div>
                </div>

                <!-- Task List Content -->
                <div id="task-content" class="space-y-4">
                    <!-- Daily Tasks -->
                    <div class="mb-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center">
                                <span class="material-icons icon-sm text-white">today</span>
                            </div>
                            <h3 class="text-lg font-semibold text-white">Daily Tasks</h3>
                        </div>

                        <div class="space-y-3">
                            <!-- Task 1 -->
                            <div class="rounded-lg p-4 border-l-4 border-green-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-white font-bold text-lg">+0.005</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Complete Code Review</h4>
                                            <p class="text-xs text-gray-400">Review 3 pull requests from team members</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors">
                                        Start
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Progress: 1/3</span>
                                    <span class="text-green-400">Profession Trait</span>
                                </div>
                            </div>

                            <!-- Task 2 -->
                            <div class="rounded-lg p-4 border-l-4 border-green-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-white font-bold text-lg">+0.005</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Follow Twin3 on X</h4>
                                            <p class="text-xs text-gray-400">Stay updated with latest news</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors">
                                        Complete
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Social Task</span>
                                    <span class="text-green-400">Available</span>
                                </div>
                            </div>

                            <!-- Task 3 -->
                            <div class="rounded-lg p-4 border-l-4 border-green-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-white font-bold text-lg">+0.005</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Join Twin3 Discord</h4>
                                            <p class="text-xs text-gray-400">Connect with the community</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors">
                                        Start
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Community Task</span>
                                    <span class="text-green-400">Available</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Weekly Tasks -->
                    <div class="mb-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center">
                                <span class="material-icons icon-sm text-white">date_range</span>
                            </div>
                            <h3 class="text-lg font-semibold text-white">Weekly Tasks</h3>
                        </div>

                        <div class="space-y-3">
                            <!-- Weekly Task 1 -->
                            <div class="rounded-lg p-4 border-l-4 border-green-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-white font-bold text-lg">+0.01</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Solve Algorithm Challenge</h4>
                                            <p class="text-xs text-gray-400">Complete a medium-level algorithm problem</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors">
                                        Start
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Progress: 50%</span>
                                    <span class="text-green-400">In Progress</span>
                                </div>
                            </div>

                            <!-- Weekly Task 2 -->
                            <div class="rounded-lg p-4 border-l-4 border-green-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-white font-bold text-lg">+0.01</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Submit 10 GitHub PRs</h4>
                                            <p class="text-xs text-gray-400">Contribute to open source projects</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors">
                                        Start
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Progress: 0/10</span>
                                    <span class="text-green-400">Available</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Achievement Tasks -->
                    <div class="mb-6">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center">
                                <span class="material-icons icon-sm text-white">emoji_events</span>
                            </div>
                            <h3 class="text-lg font-semibold text-white">Achievement Tasks</h3>
                        </div>

                        <div class="space-y-3">
                            <!-- Achievement Task 1 -->
                            <div class="rounded-lg p-4 border-l-4 border-green-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-white font-bold text-lg">+0.02</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Complete Identity Verification</h4>
                                            <p class="text-xs text-gray-400">Verify your identity for enhanced security</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-gray-600 text-white text-sm rounded-lg cursor-not-allowed" disabled>
                                        ✓ Completed
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Humanity Trust +20</span>
                                    <span class="text-green-400">Completed</span>
                                </div>
                            </div>

                            <!-- Achievement Task 2 -->
                            <div class="rounded-lg p-4 border-l-4 border-green-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-white font-bold text-lg">+0.015</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Connect 3 Professional Accounts</h4>
                                            <p class="text-xs text-gray-400">Link GitHub, LinkedIn, and Stack Overflow</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-gray-600 text-white text-sm rounded-lg cursor-not-allowed" disabled>
                                        1/3 Done
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Progress: GitHub ✓</span>
                                    <span class="text-green-400">In Progress</span>
                                </div>
                            </div>

                            <!-- Achievement Task 3 -->
                            <div class="rounded-lg p-4 border-l-4 border-gray-500" style="background: #FFFFFF0D;">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="text-gray-400 font-bold text-lg">+0.025</span>
                                            <span class="text-gray-400 font-bold">$twin3</span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">Reach Global Score 200</h4>
                                            <p class="text-xs text-gray-400">Achieve a Global Identity Score of 200 or higher</p>
                                        </div>
                                    </div>
                                    <button class="px-4 py-2 bg-gray-600 text-gray-300 text-sm rounded-lg cursor-not-allowed">
                                        Locked
                                    </button>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-400">Current: 187/200</span>
                                    <span class="text-gray-400">Locked</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rewards Logs Content (Hidden by default) -->
                <div id="rewards-content" class="space-y-4 hidden">
                    <!-- Recent Rewards -->
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-4 rounded-lg border-l-4 border-green-500" style="background: #FFFFFF0D;">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="white">
                                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-white text-sm">GitHub Account Connected</h4>
                                    <p class="text-xs text-gray-400">Aug 1, 2025 · 2:30 PM</p>
                                    <p class="text-xs text-green-400">Triggered 0087 (Cybersecurity Awareness) +50</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="flex items-center space-x-2 mb-1">
                                    <span class="text-white font-bold">+0.01</span>
                                    <span class="text-gray-400 text-sm">$twin3</span>
                                </div>
                                <div class="text-xs text-gray-400">Matrix: +50</div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-4 rounded-lg border-l-4 border-green-500" style="background: #FFFFFF0D;">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center">
                                    <span class="material-icons icon-sm text-white">psychology</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-white text-sm">Identity Verification Completed</h4>
                                    <p class="text-xs text-gray-400">Jul 28, 2025 · 10:15 AM</p>
                                    <p class="text-xs text-green-400">Humanity Trust Score +20</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="flex items-center space-x-2 mb-1">
                                    <span class="text-white font-bold">+0.02</span>
                                    <span class="text-gray-400 text-sm">$twin3</span>
                                </div>
                                <div class="text-xs text-gray-400">Humanity: +20</div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-4 rounded-lg border-l-4 border-green-500" style="background: #FFFFFF0D;">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="white">
                                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-white text-sm">LinkedIn Account Connected</h4>
                                    <p class="text-xs text-gray-400">Jul 25, 2025 · 4:45 PM</p>
                                    <p class="text-xs text-green-400">Triggered 00A3 (Professional Network) +30</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-black text-white px-8 py-10 xl:pr-20 lg:px-0 lg:py-12">
            <div class="flex flex-col-reverse lg:flex-row xl:justify-between items-start space-y-10 lg:space-y-0">
                <!-- Logo Section -->
                <div class="w-full xl:w-1/5 lg:w-[13%] text-center lg:text-left">
                    <div class="flex flex-col justify-center lg:justify-start items-center pt-6 lg:pt-0" style="gap: 4px;">
                        <div class="flex items-center">
                            <img src="assets/img/logo_dark.svg" alt="Logo" style="width: 40px; height: 40px;">
                        </div>
                        <span class="text-sm md:text-base" style="font-weight: 300; color: #888888;">twin3.ai</span>
                    </div>
                </div>

                <!-- Links Section -->
                <div class="flex flex-wrap lg:flex-nowrap w-full lg:w-2/4 lg:space-x-10">
                    <!-- Social Media -->
                    <div class="w-full md:w-1/3 text-center lg:text-left flex-row">
                        <h5 class="uppercase text-sm lg:text-base" style="font-weight: 300; color: white; padding-bottom: 12px;">Social Media</h5>
                        <div class="flex justify-center lg:justify-start space-x-4">
                            <a href="https://x.com/twin3_ai" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <div class="w-6 h-6 flex items-center justify-center" style="padding: 2px;">
                                    <img src="assets/img/X_logo.svg" alt="X (Twitter)" class="w-full h-full object-contain">
                                </div>
                            </a>
                            <a href="https://opensea.io/collection/twin3" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <img src="assets/img/opensea_logo.svg" alt="OpenSea" class="w-6 h-6">
                            </a>
                            <a href="https://warpcast.com/twin3.eth" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                <img src="assets/img/farcaster_logo.svg" alt="Warpcast" class="w-6 h-6">
                            </a>
                        </div>
                    </div>

                    <!-- Resource -->
                    <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-2 pt-4 md:pt-0">
                        <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Resource</h5>
                        <ul class="space-y-2">
                            <li><a href="https://ieeexplore.ieee.org/document/10734204" target="_blank" rel="noreferrer noopener" class="text-[#888888] hover:text-white text-sm lg:text-base" style="font-weight: 200;">Whitepaper</a></li>
                            <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/tasks/1" style="font-weight: 200;">Tasks</a></li>
                        </ul>
                    </div>

                    <!-- Features -->
                    <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-10 pt-4 md:pt-0">
                        <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Features</h5>
                        <ul class="space-y-2">
                            <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/dashboard" style="font-weight: 200;">My Twin</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Newsletter Section -->
                <div class="w-full lg:w-1/4 text-center lg:text-left space-y-5">
                    <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Subscribe to Twin3 Newsletter</h5>
                    <div class="flex flex-col lg:flex-row items-center lg:space-x-2 space-y-4 lg:space-y-0">
                        <a href="https://www.linkedin.com/company/twin3-ai" target="_blank" rel="noreferrer noopener" class="px-4 py-2 border border-[#373737] text-black bg-white rounded-lg hover:bg-transparent hover:text-white hover:border-white transition duration-300 text-sm lg:text-base" style="font-weight: 300;">Subscribe</a>
                    </div>
                </div>
            </div>

            <!-- Copyright -->
            <div class="mt-10 text-center text-gray-500 text-sm lg:text-base" style="font-weight: 200;">© 2025 Twin3.ai v1.0.6</div>
        </footer>
    </div>

        <!-- User Info Page -->
        <div id="user-info-page" class="relative min-h-screen hidden">
            <!-- Video Background -->
            <video class="page-video-background" autoplay loop muted playsinline style="z-index: 1;">
                <source src="assets/img/v2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>

            <!-- Page Content Container -->
            <div class="page-content-container">
                <!-- Unified Content Block -->
                <div class="unified-content-block page-unified-content backdrop-blur-sm rounded-lg p-8 w-full flex flex-col lg:flex-row items-stretch justify-between gap-8 min-h-fit md:items-center md:justify-center lg:items-stretch lg:justify-between">
                    <!-- Left Content (Title + Description) -->
                    <div class="page-left-content">
                        <h1 class="page-main-title main-title text-white text-4xl md:text-6xl lg:text-7xl xl:text-8xl leading-tight mb-4">
                            Create your<br>
                            Passport
                        </h1>
                        <p class="page-subtitle subtitle text-[#888888] text-xl md:text-2xl lg:text-3xl mb-8">Tell us about yourself to personalize your experience</p>
                        <p class="page-description description text-gray-300 text-base md:text-lg mb-6">
                            Choose a nickname that represents you and select up to 3 professions that best describe your expertise.<br>
                            This information will help us customize your Twin3 experience.
                        </p>
                    </div>

                    <!-- Right Action (Form) -->
                    <div class="page-right-action">
                        <div class="user-info-form w-full space-y-6">
                            <!-- Nickname Input -->
                            <div class="form-section">
                                <label class="form-label text-white text-sm mb-2 block" style="font-weight: 300;">Your Nickname</label>
                                <div class="input-wrapper" id="ui-username-wrapper">
                                    <input type="text" id="ui-username" class="input-field w-full" placeholder="Enter your nickname" />
                                    <button type="button" class="input-clear" id="ui-username-clear">
                                        <span class="material-icons icon-sm">close</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Profession Selection -->
                            <div class="form-section">
                                <label class="form-label text-white text-sm mb-2 block" style="font-weight: 300;">Select 1-3 Professions</label>
                                <div class="profession-grid" id="badge-grid"></div>
                            </div>

                            <!-- Continue Button -->
                            <button id="ui-next" class="page-action-button action-button w-full px-4 py-3 border border-[#373737] text-black bg-white rounded-lg hover:bg-transparent hover:text-white hover:border-white transition duration-300" disabled>
                                Continue
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="bg-black text-white px-8 py-10 xl:pr-20 lg:px-0 lg:py-12">
                <div class="flex flex-col-reverse lg:flex-row xl:justify-between items-start space-y-10 lg:space-y-0">
                    <!-- Logo Section -->
                    <div class="w-full xl:w-1/5 lg:w-[13%] text-center lg:text-left">
                        <div class="flex flex-col justify-center lg:justify-start items-center pt-6 lg:pt-0" style="gap: 4px;">
                            <div class="flex items-center">
                                <img src="assets/img/logo_dark.svg" alt="Logo" style="width: 40px; height: 40px;">
                            </div>
                            <span class="text-sm md:text-base" style="font-weight: 300; color: #888888;">twin3.ai</span>
                        </div>
                    </div>

                    <!-- Links Section -->
                    <div class="flex flex-wrap lg:flex-nowrap w-full lg:w-2/4 lg:space-x-10">
                        <!-- Social Media -->
                        <div class="w-full md:w-1/3 text-center lg:text-left flex-row">
                            <h5 class="uppercase text-sm lg:text-base" style="font-weight: 300; color: white; padding-bottom: 12px;">Social Media</h5>
                            <div class="flex justify-center lg:justify-start space-x-4">
                                <a href="https://x.com/twin3_ai" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                    <div class="w-6 h-6 flex items-center justify-center" style="padding: 2px;">
                                        <img src="assets/img/X_logo.svg" alt="X (Twitter)" class="w-full h-full object-contain">
                                    </div>
                                </a>
                                <a href="https://opensea.io/collection/twin3" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                    <img src="assets/img/opensea_logo.svg" alt="OpenSea" class="w-6 h-6">
                                </a>
                                <a href="https://warpcast.com/twin3.eth" target="_blank" rel="noreferrer noopener" class="hover:opacity-80 transition-opacity">
                                    <img src="assets/img/farcaster_logo.svg" alt="Warpcast" class="w-6 h-6">
                                </a>
                            </div>
                        </div>

                        <!-- Resource -->
                        <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-2 pt-4 md:pt-0">
                            <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Resource</h5>
                            <ul class="space-y-2">
                                <li><a href="https://ieeexplore.ieee.org/document/10734204" target="_blank" rel="noreferrer noopener" class="text-[#888888] hover:text-white text-sm lg:text-base" style="font-weight: 200;">Whitepaper</a></li>
                                <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/tasks/1" style="font-weight: 200;">Tasks</a></li>
                            </ul>
                        </div>

                        <!-- Features -->
                        <div class="w-full md:w-1/3 text-center lg:text-left 2xl:mb-10 pt-4 md:pt-0">
                            <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Features</h5>
                            <ul class="space-y-2">
                                <li><a class="text-[#888888] hover:text-white text-sm lg:text-base" href="/dashboard" style="font-weight: 200;">My Twin</a></li>
                            </ul>
                        </div>
                    </div>

                    <!-- Newsletter Section -->
                    <div class="w-full lg:w-1/4 text-center lg:text-left space-y-5">
                        <h5 class="uppercase mb-3 text-sm lg:text-base" style="font-weight: 300; color: white;">Subscribe to Twin3 Newsletter</h5>
                        <div class="flex flex-col lg:flex-row items-center lg:space-x-2 space-y-4 lg:space-y-0">
                            <a href="https://www.linkedin.com/company/twin3-ai" target="_blank" rel="noreferrer noopener" class="px-4 py-2 border border-[#373737] text-black bg-white rounded-lg hover:bg-transparent hover:text-white hover:border-white transition duration-300 text-sm lg:text-base" style="font-weight: 300;">Subscribe</a>
                        </div>
                    </div>
                </div>

                <!-- Copyright -->


                <div class="mt-10 text-center text-gray-500 text-sm lg:text-base" style="font-weight: 200;">© 2025 Twin3.ai v1.0.6</div>
            </footer>
        </div>

    <!-- 錢包連接模態框 - 仿照截圖設計 -->
    <div id="wallet-backdrop" class="modal-backdrop"></div>
    <div id="wallet-modal" class="modal">
        <div class="wallet-modal-card">
            <!-- 關閉按鈕 -->
            <button id="close-wallet-modal" class="wallet-close-btn">
                <span class="material-icons">close</span>
            </button>

            <!-- Modal title -->
            <h2 class="wallet-modal-title">Connect Wallet</h2>

            <!-- Main content -->
            <div class="wallet-modal-content">
                <!-- Left: wallet options -->
                <div class="wallet-options-section">
                    <h3 class="wallet-section-title">Installed</h3>

                    <!-- MetaMask 選項 -->
                    <div class="wallet-option-item" data-wallet="metamask">
                        <div class="wallet-option-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iI0Y2ODUxQiIvPgo8cGF0aCBkPSJNMjQuNjI2NyA2LjY2NjY3TDE2LjcyIDEyLjY0TDE4LjI5MzMgOC45MDY2N0wyNC42MjY3IDYuNjY2NjdaIiBmaWxsPSIjRTI3NjFCIiBzdHJva2U9IiNFMjc2MUIiIHN0cm9rZS13aWR0aD0iMC4wNjY2NjY3Ii8+CjxwYXRoIGQ9Ik03LjM3MzMzIDYuNjY2NjdMMTUuMjI2NyAxMi42OTMzTDEzLjcwNjcgOC45MDY2N0w3LjM3MzMzIDYuNjY2NjdaIiBmaWxsPSIjRTQ3NjFCIiBzdHJva2U9IiNFNDc2MUIiIHN0cm9rZS13aWR0aD0iMC4wNjY2NjY3Ii8+CjxwYXRoIGQ9Ik0yMS4zNiAyMC4yNjY3TDE5LjQxMzMgMjMuMjhMMjQuMjQgMjQuNDhMMjUuNDQgMjAuMzJMMjEuMzYgMjAuMjY2N1oiIGZpbGw9IiNFNDc2MUIiIHN0cm9rZT0iI0U0NzYxQiIgc3Ryb2tlLXdpZHRoPSIwLjA2NjY2NjciLz4KPHBhdGggZD0iTTYuNTYgMjAuMzJMNy43NiAyNC40OEwxMi41ODY3IDIzLjI4TDEwLjY0IDIwLjI2NjdMNi41NiAyMC4zMloiIGZpbGw9IiNFNDc2MUIiIHN0cm9rZT0iI0U0NzYxQiIgc3Ryb2tlLXdpZHRoPSIwLjA2NjY2NjciLz4KPC9zdmc+" alt="MetaMask" class="wallet-icon">
                        </div>
                        <div class="wallet-option-info">
                            <span class="wallet-name">MetaMask</span>
                            <span class="wallet-status">Browser</span>
                        </div>
                    </div>

                    <h3 class="wallet-section-title">Recommended</h3>

                    <!-- WalletConnect option (disabled) -->
                    <div class="wallet-option-item disabled" data-wallet="walletconnect" aria-disabled="true">
                        <div class="wallet-option-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzM5OTZGRiIvPgo8cGF0aCBkPSJNMTAuNjY2NyAxMy4zMzMzQzEzLjYxMzMgMTAuMzg2NyAxOC4zODY3IDEwLjM4NjcgMjEuMzMzMyAxMy4zMzMzTDIxLjg2NjcgMTMuODY2N0MyMi4wNTMzIDE0LjA1MzMgMjIuMDUzMyAxNC4zNDY3IDIxLjg2NjcgMTQuNTMzM0wyMC44IDEzLjQ2NjdDMTguNzIgMTEuMzg2NyAxNS4yOCAxMS4zODY3IDEzLjIgMTMuNDY2N0wxMi4xMzMzIDE0LjUzMzNDMTEuOTQ2NyAxNC43MiAxMS42NTMzIDE0LjcyIDExLjQ2NjcgMTQuNTMzM0wxMC40IDE0LjUzMzNDMTAuMjEzMyAxNC4zNDY3IDEwLjIxMzMgMTQuMDUzMyAxMC40IDEzLjg2NjdMMTAuNjY2NyAxMy4zMzMzWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+" alt="WalletConnect" class="wallet-icon">
                        </div>
                        <div class="wallet-option-info">
                            <span class="wallet-name">WalletConnect</span>
                        </div>
                    </div>
                </div>

                <!-- Right: wallet info -->
                <div class="wallet-info-section">
                    <h3 class="wallet-info-title">What is a Wallet?</h3>

                    <!-- Feature card -->
                    <div class="wallet-feature-card">
                        <div class="wallet-feature-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzMzNzNkYyIvPgo8cGF0aCBkPSJNMjAgMTBDMTQuNDc3MiAxMCAxMCAxNC40NzcyIDEwIDIwQzEwIDI1LjUyMjggMTQuNDc3MiAzMCAyMCAzMEMyNS41MjI4IDMwIDMwIDI1LjUyMjggMzAgMjBDMzAgMTQuNDc3MiAyNS41MjI4IDEwIDIwIDEwWk0yMiAyNUgxOFYxOEgyMlYyNVpNMjIgMTZIMThWMTJIMjJWMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=" alt="Digital Assets" class="feature-icon">
                        </div>
                        <div class="wallet-feature-content">
                            <h4 class="wallet-feature-title">Your digital assets home</h4>
                            <p class="wallet-feature-desc">Use a wallet to send, receive, store, and display digital assets like NFTs.</p>
                        </div>
                    </div>

                    <div class="wallet-feature-card">
                        <div class="wallet-feature-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iI2ZmNjU5MyIvPgo8cGF0aCBkPSJNMjAgMTBDMTQuNDc3MiAxMCAxMCAxNC40NzcyIDEwIDIwQzEwIDI1LjUyMjggMTQuNDc3MiAzMCAyMCAzMEMyNS41MjI4IDMwIDMwIDI1LjUyMjggMzAgMjBDMzAgMTQuNDc3MiAyNS41MjI4IDEwIDIwIDEwWk0yNSAyMEwyMCAyNUwxNSAyMEgxOFYxNUgyMlYyMEgyNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==" alt="New Login" class="feature-icon">
                        </div>
                        <div class="wallet-feature-content">
                            <h4 class="wallet-feature-title">A new way to log in</h4>
                            <p class="wallet-feature-desc">No need to create new accounts and passwords—just connect your wallet.</p>
                        </div>
                    </div>

                    <!-- Get wallet button (disabled) -->
                    <button class="get-wallet-btn disabled" disabled aria-disabled="true">
                        Get a Wallet
                    </button>

                    <!-- Learn more link -->
                    <a href="#" class="learn-more-link">Learn More</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Web3Modal 配置
        let web3Modal = null;
        let provider = null;

        // 簡化的錢包連接 - 先使用自定義模態框
        function initWeb3Modal() {
            console.log('Using custom wallet modal');
            return false; // 暫時停用 Web3Modal，使用自定義模態框
        }

        // Application state
        let currentStep = 'welcome';
        let userData = { username: '', career: '' };
        let level1Complete = false;
        let level2Complete = false;

        // DOM elements
        const welcomePage = document.getElementById('welcome-page');
        const proofPage = document.getElementById('proof-page');
        const dashboardPage = document.getElementById('dashboard-page');
        const usernameInput = document.getElementById('username');
        const careerSelect = document.getElementById('career');
        const nextBtn = document.getElementById('next-btn');
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step1Btn = document.getElementById('step1-btn');
        const startMobileAuthBtn = document.getElementById('start-mobile-auth');
        const getStartedBtn = document.getElementById('get-started-btn');
        const dashboardTitle = document.getElementById('dashboard-title');

        // Tab elements
        const taskTab = document.getElementById('task-tab');
        const rewardsTab = document.getElementById('rewards-tab');
        const taskContent = document.getElementById('task-content');
        const rewardsContent = document.getElementById('rewards-content');

        // Welcome page logic
        function validateWelcomeForm() {
            const username = usernameInput.value.trim();
            const career = careerSelect.value;

            if (username && career) {
                nextBtn.disabled = false;
                nextBtn.classList.remove('opacity-50');
            } else {
                nextBtn.disabled = true;
                nextBtn.classList.add('opacity-50');
            }
        }

        usernameInput.addEventListener('input', validateWelcomeForm);
        careerSelect.addEventListener('change', validateWelcomeForm);

        nextBtn.addEventListener('click', () => {
            userData.username = usernameInput.value.trim();
            userData.career = careerSelect.value;

            if (userData.username && userData.career) {
                showProofPage();
            }
        });

        // Proof of Humanity page logic
        let step1Completed = false;
        let step2Completed = false;

        // Initially set both steps as not completed and both clickable (2選1)
        step1.classList.remove('completed');
        step2.classList.remove('completed');
        if (startMobileAuthBtn) startMobileAuthBtn.disabled = false;

        // Step 1: Click to complete reCAPTCHA
        step1Btn.addEventListener('click', () => {
            if (!step1Completed) {
                step1Btn.textContent = 'Verifying...';
                step1Btn.disabled = true;

                setTimeout(() => {
                    step1.classList.add('completed');
                    step1Completed = true;

                    // Update step 1 content to show completed state
                    const stepContent = step1.querySelector('.step-content');
                    stepContent.removeChild(step1Btn);

                    const step1Status = document.createElement('div');
                    step1Status.className = 'step-status completed';
                    step1Status.innerHTML = `
                        <img src="assets/img/Check icon.svg" alt="Completed" class="check-icon-img" />
                    `;
                    stepContent.appendChild(step1Status);

                    // One step is enough (2選1)
                    checkAllStepsCompleted();
                }, 1500);
            }
        });

        // Step 2: Mobile Authentication
        // Allow Step 2 to be taken independently (2選1)
        startMobileAuthBtn.addEventListener('click', () => {
            if (!step2Completed) {
                // Simulate mobile authentication process
                startMobileAuthBtn.textContent = 'Authenticating...';
                startMobileAuthBtn.disabled = true;

                setTimeout(() => {
                    step2.classList.add('completed');
                    step2Completed = true;

                    // Replace Start button with check mark
                    const stepContent = step2.querySelector('.step-content');
                    stepContent.removeChild(startMobileAuthBtn);

                    const step2Status = document.createElement('div');
                    step2Status.className = 'step-status completed';
                    step2Status.innerHTML = `
                        <img src="assets/img/Check icon.svg" alt="Completed" class="check-icon-img" />
                    `;
                    stepContent.appendChild(step2Status);

                    // One step is enough (2選1)
                    checkAllStepsCompleted();
                }, 2000);
            }
        });

        function checkAllStepsCompleted() {
            if (step1Completed || step2Completed) {
                getStartedBtn.disabled = false;
                getStartedBtn.classList.add('completed');
            } else {
                getStartedBtn.disabled = true;
                getStartedBtn.classList.remove('completed');
            }
        }

        // Navigate to User Info after verification complete
        getStartedBtn.addEventListener('click', () => {
            if (!getStartedBtn.disabled) {
                try { location.hash = '#user-info'; } catch (e) {}
                console.log('[Next] Moving to User Info page');
                try {
                    showUserInfoPage();
                    setTimeout(showUserInfoPage, 120);
                    setTimeout(showUserInfoPage, 360);
                } catch (e) { console.error(e); }
            }
        });

        // Navigation functions
        function showProofPage() {
            // Hide all pages first
            welcomePage.classList.add('hidden');
            dashboardPage.classList.add('hidden');
            // Show proof page
            proofPage.classList.remove('hidden');
            currentStep = 'proof';

            // Show only proof page footer, hide others
            const allFooters = document.querySelectorAll('footer');
            allFooters.forEach(footer => {
                const parentPage = footer.closest('[id$="-page"]');
                if (parentPage && parentPage.id === 'proof-page') {
                    footer.style.display = '';
                    // 確保 Footer 在底部
                    footer.style.position = 'relative';
                    footer.style.marginTop = 'auto';
                } else {
                    footer.style.display = 'none';
                }
            });
        }

        function showDashboard() {
            // Hide all pages first
            welcomePage.classList.add('hidden');
            proofPage.classList.add('hidden');
            // Show dashboard page
            dashboardPage.classList.remove('hidden');

            // Force hide all footers except the one in dashboard page
            const allFooters = document.querySelectorAll('footer');
            allFooters.forEach(footer => {
                const parentPage = footer.closest('[id$="-page"]');
                if (parentPage && parentPage.id !== 'dashboard-page') {
                    footer.style.display = 'none';
                } else if (parentPage && parentPage.id === 'dashboard-page') {
                    footer.style.display = '';



                }
            });

            // Update dashboard with user data
            dashboardTitle.textContent = `Hi, ${userData.username}!`;

            // Update career-specific content
            const careerData = getCareerData(userData.career);
            document.getElementById('career-type').innerHTML = careerData.icon + ' ' + careerData.name;
            document.getElementById('career-title').textContent = careerData.title;
            document.getElementById('career-cta').textContent = careerData.cta;

            currentStep = 'dashboard';
        }

        // Unified page navigation - single source of truth
        function navigateTo(pageId){
            try{
                const pages=['welcome-page','proof-page','user-info-page','dashboard-page'];
                pages.forEach(id=>{ const el=document.getElementById(id); if(el){ el.classList.add('hidden'); el.style.removeProperty('display'); }});
                // Close wallet modal/backdrop if open
                const wm=document.getElementById('wallet-modal');
                const wb=document.getElementById('wallet-backdrop');
                if(wm){ wm.classList.remove('show'); wm.classList.add('hidden'); wm.style.setProperty('display','none','important'); }
                if(wb){ wb.classList.remove('show'); wb.classList.add('hidden'); wb.style.setProperty('display','none','important'); }
                const target=document.getElementById(pageId);
                if(!target){ console.error('navigateTo: target not found', pageId); return; }
                target.classList.remove('hidden');
                target.style.display='block';
                const bg=target.querySelector('.page-video-background'); if(bg) bg.style.display='block';
                const content=target.querySelector('.page-content-container'); if(content) content.style.display='flex';
                // Footers: show only the one under target page
                document.querySelectorAll('footer').forEach(footer=>{
                    const parent=footer.closest('[id$="-page"]');
                    footer.style.display = (parent && parent.id===pageId) ? '' : 'none';
                });
                window.scrollTo({top:0,behavior:'instant'});
                console.log('[NAV] ->', pageId);
            }catch(e){ console.error('navigateTo error:', e); }
        }
        window.navTo = navigateTo;


        function showUserInfoPage() {
            try {
                // Hide other pages first
                welcomePage.classList.add('hidden');
                proofPage.classList.add('hidden');
                dashboardPage.classList.add('hidden');

                // Close any wallet modal/backdrop just in case
                const walletModalEl = document.getElementById('wallet-modal');
                const walletBackdropEl = document.getElementById('wallet-backdrop');
                if (walletModalEl) {
                    walletModalEl.classList.remove('show');
                    walletModalEl.classList.add('hidden');
                    walletModalEl.style.setProperty('display', 'none', 'important');
                }
                if (walletBackdropEl) {
                    walletBackdropEl.classList.remove('show');
                    walletBackdropEl.classList.add('hidden');
                    walletBackdropEl.style.setProperty('display', 'none', 'important');
                }

                // Show user info page
                const userInfo = document.getElementById('user-info-page');
                if (!userInfo) {
                    console.error('User Info page element not found');
                    return;
                }
                userInfo.classList.remove('hidden');
                userInfo.style.display = 'block';
                currentStep = 'user_info';

                // Ensure background video and content are visible
                const bg = userInfo.querySelector('.page-video-background');
                if (bg) bg.style.display = 'block';
                const content = userInfo.querySelector('.page-content-container');
                if (content) content.style.display = 'flex';

                // Show only user info footer
                const allFooters = document.querySelectorAll('footer');
                allFooters.forEach(footer => {
                    const parentPage = footer.closest('[id$="-page"]');
                    footer.style.display = (parentPage && parentPage.id === 'user-info-page') ? '' : 'none';
                });

                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
                console.log('✅ User Info page shown');
            } catch (e) {
                console.error('Failed to show user info page:', e);
            }
        }



        function getCareerData(career) {
            const careerMap = {
                'creative': {
                    name: 'Creative Content Maker',
                    title: 'Creative Virtuoso',
                    icon: '<span class="material-icons">palette</span>',
                    cta: 'Unleash your creativity across all mediums, inspire the world!'
                },
                'developer': {
                    name: 'Developer',
                    title: 'Code Architect',
                    icon: '<span class="material-icons">code</span>',
                    cta: 'Build the future with AI-powered development skills'
                },
                'researcher': {
                    name: 'Research & Innovation Expert',
                    title: 'Innovation Pioneer',
                    icon: '<span class="material-icons">psychology</span>',
                    cta: 'Drive breakthrough discoveries and innovation'
                },
                'web3': {
                    name: 'Web3 Network Pioneer',
                    title: 'Blockchain Visionary',
                    icon: '<span class="material-icons">language</span>',
                    cta: 'Shape the decentralized future of the internet'
                },
                'influencer': {
                    name: 'Social Influencer',
                    title: 'Community Leader',
                    icon: '<span class="material-icons">groups</span>',
                    cta: 'Build communities and inspire positive change'
                },
                'gamer': {
                    name: 'Gamer',
                    title: 'Gaming Champion',
                    icon: '<span class="material-icons">sports_esports</span>',
                    cta: 'Master virtual worlds and competitive gaming'
                },
                'artist': {
                    name: 'Artist',
                    title: 'Creative Master',
                    icon: '<span class="material-icons">brush</span>',
                    cta: 'Express your vision through artistic excellence'
                },
                'entrepreneur': {
                    name: 'Entrepreneur',
                    title: 'Business Innovator',
                    icon: '<span class="material-icons">business_center</span>',
                    cta: 'Build ventures that change the world'
                },
                'educator': {
                    name: 'Educator',
                    title: 'Knowledge Catalyst',
                    icon: '<span class="material-icons">school</span>',
                    cta: 'Empower minds and shape the future through education'
                },
                'healthcare': {
                    name: 'Healthcare Professional',
                    title: 'Health Guardian',
                    icon: '<span class="material-icons">local_hospital</span>',
                    cta: 'Heal, care, and improve lives through medical expertise'
                },
                'athlete': {
                    name: 'Athlete',
                    title: 'Performance Champion',
                    icon: '<span class="material-icons">emoji_events</span>',
                    cta: 'Push physical limits and inspire through sport'
                },
                'writer': {
                    name: 'Writer',
                    title: 'Storytelling Master',
                    icon: '<span class="material-icons">edit</span>',
                    cta: 'Craft compelling narratives that move the world'
                },
                'software-engineer': {
                    name: 'Software Engineer',
                    title: 'System Architect',
                    icon: '<span class="material-icons">computer</span>',
                    cta: 'Build and maintain robust software systems'
                },
                'data-scientist': {
                    name: 'Data Scientist',
                    title: 'Insight Generator',
                    icon: '<span class="material-icons">analytics</span>',
                    cta: 'Extract insights and patterns from complex data'
                },
                'product-manager': {
                    name: 'Product Manager',
                    title: 'Product Strategist',
                    icon: '<span class="material-icons">track_changes</span>',
                    cta: 'Guide product development and strategic vision'
                },
                'designer': {
                    name: 'UX/UI Designer',
                    title: 'Experience Architect',
                    icon: '<span class="material-icons">design_services</span>',
                    cta: 'Create user-centered design solutions'
                },


                'marketing': {
                    name: 'Marketing Specialist',
                    title: 'Growth Catalyst',
                    icon: '<span class="material-icons">campaign</span>',
                    cta: 'Drive growth and build compelling brand experiences'
                },
                'manager': {
                    name: 'Product Manager',
                    title: 'Product Strategist',
                    icon: '<span class="material-icons">business_center</span>',
                    cta: 'Lead products from vision to market success'
                },
                'writer': {
                    name: 'Content Writer',
                    title: 'Story Architect',
                    icon: '<span class="material-icons">edit</span>',
                    cta: 'Craft compelling narratives that engage audiences'
                },
                'consultant': {
                    name: 'Consultant',
                    title: 'Solution Expert',
                    icon: '<span class="material-icons">work</span>',
                    cta: 'Solve complex challenges with strategic expertise'
                },
                'entrepreneur': {
                    name: 'Entrepreneur',
                    title: 'Innovation Pioneer',
                    icon: '<span class="material-icons">rocket_launch</span>',
                    cta: 'Build ventures that change the world'
                },
                'researcher': {
                    name: 'Researcher',
                    title: 'Knowledge Explorer',
                    icon: '<span class="material-icons">science</span>',
                    cta: 'Discover insights that advance human understanding'
                },
                'educator': {
                    name: 'Educator',
                    title: 'Learning Facilitator',
                    icon: '<span class="material-icons">school</span>',
                    cta: 'Empower minds through transformative education'
                },
                'artist': {
                    name: 'Artist',
                    title: 'Creative Expression',
                    icon: '<span class="material-icons">theater_comedy</span>',
                    cta: 'Express creativity that moves hearts and minds'
                },
                'engineer': {
                    name: 'Engineer',
                    title: 'System Builder',
                    icon: '<span class="material-icons">engineering</span>',
                    cta: 'Engineer solutions that power the future'
                },
                'explorer': {
                    name: 'Explorer',
                    title: 'Boundary Pusher',
                    icon: '<span class="material-icons">explore</span>',
                    cta: 'Discover new frontiers and possibilities'
                },
                'community': {
                    name: 'Community Builder',
                    title: 'Connection Catalyst',
                    icon: '<span class="material-icons">groups</span>',
                    cta: 'Build communities that thrive and grow together'
                }
            };

            return careerMap[career] || careerMap['developer'];
        }

        // Update CTA text based on selected career
        function updateCareerCTA(career) {
            const careerData = getCareerData(career);
            const ctaElement = document.getElementById('career-cta');

            if (ctaElement && careerData) {
                ctaElement.innerHTML = `
                    <div class="cta-main">${careerData.cta}</div>
                    <div class="cta-description">
                        Complete our quick 2 step verification to unlock your<br>
                        supercharged digital identity and join our authentic community.
                    </div>
                `;
            }
        }

        function updateProgress() {
            let progress = 0;
            if (level1Complete) progress += 50;
            if (level2Complete) progress += 50;

        // Ultra-resilient fallback to show user info page even if other logic fails
        function hardShowUserInfoPage(){
            try{
                console.log('hardShowUserInfoPage() invoked');
                // Hide all pages first
                document.querySelectorAll('[id$="-page"]').forEach(el=>el.classList.add('hidden'));
                const u = document.getElementById('user-info-page');
                if(!u){ console.error('user-info-page not found'); return; }
                u.classList.remove('hidden');
                u.style.display = 'block';
                const bg=u.querySelector('.page-video-background'); if(bg) bg.style.display='block';
                const content=u.querySelector('.page-content-container'); if(content) content.style.display='flex';
                // Show only this page's footer
                const allFooters = document.querySelectorAll('footer');
                allFooters.forEach(f=>{ const pp=f.closest('[id$="-page"]'); f.style.display=(pp&&pp.id==='user-info-page')?'':'none';});
                window.scrollTo({top:0,behavior:'instant'});
            }catch(e){ console.error('hardShowUserInfoPage error:', e); }
        }
        window.hardShowUserInfoPage = hardShowUserInfoPage;


            progressFill.style.width = progress + '%';
        }

        // Tab switching functionality
        function switchToTaskTab() {
            taskTab.classList.add('bg-green-600', 'text-white');
            taskTab.classList.remove('text-gray-400');
            rewardsTab.classList.remove('bg-green-600', 'text-white');
            rewardsTab.classList.add('text-gray-400');

            taskContent.classList.remove('hidden');
            rewardsContent.classList.add('hidden');

            document.getElementById('active-count').textContent = '5 Active Tasks';
        }

        function switchToRewardsTab() {
            rewardsTab.classList.add('bg-green-600', 'text-white');
            rewardsTab.classList.remove('text-gray-400');
            taskTab.classList.remove('bg-green-600', 'text-white');
            taskTab.classList.add('text-gray-400');

            rewardsContent.classList.remove('hidden');
            taskContent.classList.add('hidden');

            document.getElementById('active-count').textContent = 'Total Earned: 0.247 $twin3';
        }

        // Add event listeners for tabs
        if (taskTab && rewardsTab) {
            taskTab.addEventListener('click', switchToTaskTab);
            rewardsTab.addEventListener('click', switchToRewardsTab);
        }

        // Background animation is handled by CSS
        // No JavaScript particle generation needed

        // Custom Select Functionality
        function initializeCustomSelect() {
            const trigger = document.getElementById('career-trigger');
            const options = document.getElementById('career-options');
            const selected = document.getElementById('career-selected');
            const hiddenInput = document.getElementById('career');

            if (!trigger || !options || !selected || !hiddenInput) return;

            // Toggle dropdown
            trigger.addEventListener('click', function() {
                const isOpen = options.classList.contains('show');
                if (isOpen) {
                    options.classList.remove('show');
                    trigger.classList.remove('active');
                } else {
                    options.classList.add('show');
                    trigger.classList.add('active');
                }
            });

            // Handle option selection
            const optionElements = options.querySelectorAll('.custom-select-option');
            optionElements.forEach(option => {
                option.addEventListener('click', function() {
                    const value = this.getAttribute('data-value');
                    const icon = this.querySelector('.material-icons').textContent;
                    const text = this.querySelector('span:last-child').textContent;

                    // Update selected display
                    selected.innerHTML = `
                        <span class="material-icons">${icon}</span>
                        <span>${text}</span>
                    `;

                    // Update hidden input
                    hiddenInput.value = value;



            // After verification complete -> go to user info (hard fallback)
            if (getStartedBtn) {
                getStartedBtn.addEventListener('click', () => {
                    if (!getStartedBtn.disabled) {
                        try{
                            showUserInfoPage();
                            setTimeout(showUserInfoPage, 120);
                            setTimeout(hardShowUserInfoPage, 360);
                        }catch(e){ console.error(e); }
                    }
                });
            }

            // User info badges
            const professionList = [
                'Artist','Athlete','Community Builder','Creative Content Maker','Developer','Educator','Entrepreneur','Gamer','Healthcare Professional','Research & Innovation Expert','Social Influencer','Travel Explorer','Web3 Network Pioneer','Writer'
            ];
            const professionIcons = {
                'Artist':'brush','Athlete':'emoji_events','Community Builder':'people','Creative Content Maker':'palette','Developer':'code','Educator':'school','Entrepreneur':'business_center','Gamer':'sports_esports','Healthcare Professional':'local_hospital','Research & Innovation Expert':'psychology','Social Influencer':'groups','Travel Explorer':'explore','Web3 Network Pioneer':'language','Writer':'edit'
            };

            const badgeGrid = document.getElementById('badge-grid');
            const uiUsername = document.getElementById('ui-username');
            const uiUsernameWrapper = document.getElementById('ui-username-wrapper');
            const uiUsernameClear = document.getElementById('ui-username-clear');
            const uiNext = document.getElementById('ui-next');
            const selectedBadges = new Set();
            const MAX_BADGES = 3;

            function renderBadges() {
                if (!badgeGrid) return;
                badgeGrid.innerHTML = '';
                // ensure alphabetical order
                const sorted = [...professionList].sort((a,b)=>a.localeCompare(b));
                sorted.forEach(name => {
                    const div = document.createElement('div');
                    div.className = 'career-badge';
                    div.dataset.value = name;
                    div.innerHTML = `<span class="material-icons icon-sm">${professionIcons[name]}</span><span>${name}</span>`;
                    div.addEventListener('click', () => toggleBadge(div));
                    badgeGrid.appendChild(div);
                });
            }

            function toggleBadge(el) {
                const name = el.dataset.value;
                if (el.classList.contains('selected')) {
                    el.classList.remove('selected');
                    selectedBadges.delete(name);
                } else {
                    if (selectedBadges.size >= MAX_BADGES) return;
                    el.classList.add('selected');
                    selectedBadges.add(name);
                }
                updateBadgeDisabledState();
                validateUserInfo();
            }

            function updateBadgeDisabledState() {
                const all = badgeGrid ? badgeGrid.querySelectorAll('.career-badge') : [];
                const disable = selectedBadges.size >= MAX_BADGES;
                all.forEach(el => {
                    if (!el.classList.contains('selected')) {
                        el.classList.toggle('disabled', disable);
                    } else {
                        el.classList.remove('disabled');
                    }
                });
            }

            function validateUserInfo() {
                const name = uiUsername ? uiUsername.value.trim() : '';
                uiNext.disabled = !(name && selectedBadges.size >= 1 && selectedBadges.size <= MAX_BADGES);
            }

            if (uiUsername && uiUsernameWrapper && uiUsernameClear) {
                const updateClear = () => {
                    if (uiUsername.value.trim()) uiUsernameWrapper.classList.add('has-value');
                    else uiUsernameWrapper.classList.remove('has-value');
                };
                uiUsername.addEventListener('input', () => { updateClear(); validateUserInfo(); });
                uiUsernameClear.addEventListener('click', () => { uiUsername.value=''; uiUsername.focus(); updateClear(); validateUserInfo(); });
                updateClear();
            }

            if (uiNext) {
                uiNext.addEventListener('click', () => {
                    userData.username = uiUsername.value.trim();
                    // store first selected as primary career to reuse existing dashboard binding
                    const primary = Array.from(selectedBadges)[0] || 'Developer';
                    // map back to keys expected by getCareerData if needed
                    const keyByName = {
                        'Creative Content Maker':'creative',
                        'Developer':'developer',
                        'Research & Innovation Expert':'researcher',
                        'Web3 Network Pioneer':'web3',
                        'Social Influencer':'influencer',
                        'Gamer':'gamer',
                        'Artist':'artist',
                        'Entrepreneur':'entrepreneur',
                        'Educator':'educator',
                        'Healthcare Professional':'healthcare',
                        'Athlete':'athlete',
                        'Writer':'writer',
                        'Travel Explorer':'explorer',
                        'Community Builder':'community'
                    };
                    userData.career = keyByName[primary] || 'developer';

                    // proceed to dashboard
                    userInfoPage.classList.add('hidden');
                    showDashboard();
                });
            }

            // initial renders
            renderBadges();


                    // Update CTA text on page 2
                    updateCareerCTA(value);

                    // Close dropdown
                    options.classList.remove('show');
                    trigger.classList.remove('active');

                    // Validate form
                    validateWelcomeForm();
                });
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!trigger.contains(event.target) && !options.contains(event.target)) {
                    options.classList.remove('show');
                    trigger.classList.remove('active');
                }
            });
        }

        // Username Input Functionality
        function initializeUsernameInput() {
            const usernameInput = document.getElementById('username');
            const usernameWrapper = document.getElementById('username-wrapper');
            const clearButton = document.getElementById('username-clear');

            if (!usernameInput || !usernameWrapper || !clearButton) return;

            // Update clear button visibility based on input value
            function updateClearButton() {
                if (usernameInput.value.trim()) {
                    usernameWrapper.classList.add('has-value');
                } else {
                    usernameWrapper.classList.remove('has-value');
                }
            }

            // Handle input changes
            usernameInput.addEventListener('input', function() {
                updateClearButton();
                validateWelcomeForm();
            });

            // Handle clear button click
            clearButton.addEventListener('click', function() {
                usernameInput.value = '';
                usernameInput.focus();
                updateClearButton();
                validateWelcomeForm();
            });

            // Initial check
            updateClearButton();
        }

        // Initialize navigation
        function initializeNavigation() {
            const socialIcons = document.querySelectorAll('.nav-social-icon');

            socialIcons.forEach(icon => {
                icon.addEventListener('click', function() {
                    const title = this.getAttribute('title');
                    if (title === 'Twitter') {
                        window.open('https://twitter.com/pilso_official', '_blank');
                    } else if (title === 'GitHub') {
                        window.open('https://github.com/pilso', '_blank');
                    } else if (title === 'Discord') {
                        window.open('https://discord.gg/pilso', '_blank');
                    }
                });
            });
        }

        // Initialize flow navigation with DOMContentLoaded
        function initializeFlowNavigation() {
            console.log('Initializing flow navigation...');

            // 初始化背景視頻
            initializeBackgroundVideo();

            // 初始化 Web3Modal
            const web3ModalInitialized = initWeb3Modal();
            if (web3ModalInitialized) {
                console.log('Web3Modal 已啟用');
            } else {
                console.log('Using custom wallet modal');
            }
        }

        // 初始化背景視頻
        function initializeBackgroundVideo() {
            const videos = document.querySelectorAll('video');
            console.log(`Found ${videos.length} video elements`);

            videos.forEach((video, index) => {
                console.log(`Initializing video ${index + 1}:`, video.src || video.querySelector('source')?.src);

                // 確保視頻屬性正確設置
                video.muted = true;
                video.autoplay = true;
                video.loop = true;
                video.playsInline = true;

                // 監聽視頻事件
                video.addEventListener('loadstart', () => {
                    console.log(`Video ${index + 1}: Load started`);
                });

                video.addEventListener('canplay', () => {
                    console.log(`Video ${index + 1}: Can play`);
                    video.play().catch(error => {
                        console.error(`Video ${index + 1} play error:`, error);
                    });
                });

                video.addEventListener('error', (e) => {
                    console.error(`Video ${index + 1} error:`, e);
                });

                video.addEventListener('loadeddata', () => {
                    console.log(`Video ${index + 1}: Data loaded`);
                });

                // 嘗試立即播放
                video.play().catch(error => {
                    console.log(`Video ${index + 1} initial play failed (normal):`, error.message);
                });
            });
        }

        // DOM elements - 全域變數
        const walletModal = document.getElementById('wallet-modal');
        const walletBackdrop = document.getElementById('wallet-backdrop');
        const freeMintBtn = document.getElementById('free-mint-btn');
        const userInfoPage = document.getElementById('user-info-page');
        const proofPageEl = document.getElementById('proof-page');

        console.log('Elements found:', {
            walletModal: !!walletModal,
            walletBackdrop: !!walletBackdrop,
            freeMintBtn: !!freeMintBtn,
            userInfoPage: !!userInfoPage,
            proofPageEl: !!proofPageEl
        });

        // 測試函數是否可用
        console.log('Functions available:', {
            checkWalletStatus: typeof checkWalletStatus,
            openWalletModal: typeof openWalletModal,
            closeWalletModal: typeof closeWalletModal
        });

        // Passport Registration Flow Functions
        function checkWalletStatus() {
            console.log('🔍 Checking wallet connection status...');

            // 顯示檢查狀態的 UI 反饋
            showWalletCheckingStatus();

            // Simulate system check (2s delay)
            setTimeout(() => {
                // 假的錢包連結狀態檢查
                const isWalletConnected = simulateWalletCheck();

                if (isWalletConnected) {
                    console.log('✅ Wallet already connected');
                    hideWalletCheckingStatus();
                    showWalletConnectedMessage();

                    // 延遲後進入人工驗證
                    setTimeout(() => {
                        proceedToHumanVerification();
                    }, 1500);
                } else {
                    console.log('❌ Wallet not connected');
                    hideWalletCheckingStatus();
                    showWalletNotConnectedMessage();

                    // 延遲後開始錢包連結流程
                    setTimeout(() => {
                        startWalletLinkingFlow();
                    }, 1000);
                }
            }, 2000);
        }

        // Simulate wallet check (always returns not connected for testing)
        function simulateWalletCheck() {
            // 總是返回未連結來測試錢包連接流程
            return false;
        }

        // Show checking status
        function showWalletCheckingStatus() {
            // 創建檢查狀態提示
            const statusDiv = document.createElement('div');
            statusDiv.id = 'wallet-checking-status';
            statusDiv.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(26, 26, 26, 0.95);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        border-radius: 12px;
                        padding: 24px 32px;
                        z-index: 3000;
                        text-align: center;
                        backdrop-filter: blur(10px);
                    ">
                        <div style="
                            width: 24px;
                            height: 24px;
                            border: 2px solid rgba(255, 255, 255, 0.3);
                            border-top: 2px solid #3b82f6;
                            border-radius: 50%;
                            animation: spin 1s linear infinite;
                            margin: 0 auto 16px auto;
                        "></div>
                        <div style="color: #fff; font-size: 16px; font-weight: 300; margin-bottom: 8px;">
                            Checking...
                        </div>
                        <div style="color: #888; font-size: 14px;">
                            Verifying wallet connection
                        </div>
                    </div>
                `;

            // 添加旋轉動畫
            if (!document.querySelector('#spin-animation')) {
                const style = document.createElement('style');
                style.id = 'spin-animation';
                style.textContent = `
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                `;
                document.head.appendChild(style);
            }

            document.body.appendChild(statusDiv);
        }

        // Hide checking status
        function hideWalletCheckingStatus() {
            const statusDiv = document.getElementById('wallet-checking-status');
            if (statusDiv) {
                statusDiv.remove();
            }
        }

        // Show connected message
        function showWalletConnectedMessage() {
            showStatusMessage('Wallet connected', 'Your wallet is connected. Redirecting to verification…', '#10b981');
        }

        // Show not connected message
        function showWalletNotConnectedMessage() {
            showStatusMessage('Connect wallet required', 'Please choose a wallet to continue', '#f59e0b');
        }

        // Status notification (uses specified icons for required/completed)
        function showStatusMessage(title, message, color) {
            const messageDiv = document.createElement('div');
            messageDiv.id = 'wallet-status-message';

            const lower = (title || '').toLowerCase();
            const isCompleted = lower.includes('connected') || lower.includes('completed') || lower.includes('success');
            const iconSrc = isCompleted
                ? 'assets/img/Size=xs, Color=Success, Theme=Dark circle.svg'
                : 'assets/img/Size=xs, Color=Warning, Theme=Dark circle.svg';
            const iconAlt = isCompleted ? 'Completed' : 'Required';

            messageDiv.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(26, 26, 26, 0.95);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        border-radius: 12px;
                        padding: 24px 32px;
                        z-index: 3000;
                        text-align: center;
                        backdrop-filter: blur(10px);
                        max-width: 320px;
                    ">
                        <img src="${iconSrc}" alt="${iconAlt}" style="width:48px;height:48px;display:block;margin:0 auto 16px auto;" />
                        <div style="color: #fff; font-size: 16px; font-weight: 300; margin-bottom: 8px;">${title}</div>
                        <div style="color: #888; font-size: 14px; line-height: 1.4;">${message}</div>
                    </div>
                `;

            document.body.appendChild(messageDiv);

            // Auto remove (a bit longer for success)
            setTimeout(() => {
                if (messageDiv) {
                    messageDiv.remove();
                }
            }, isCompleted ? 1500 : 1200);
        }

        async function startWalletLinkingFlow() {
            console.log('🔗 Starting wallet linking flow...');

            // 選項 1: 使用 Web3Modal (如果已初始化)
            if (typeof web3Modal !== 'undefined' && web3Modal) {
                try {
                    console.log('🌐 Using Web3Modal for wallet connection');

                    // 連接錢包
                    const provider = await web3Modal.connect();

                    if (provider) {
                        console.log('✅ Wallet connected');

                        // 設置 provider 事件監聽
                        provider.on("accountsChanged", (accounts) => {
                            console.log('🔄 Accounts changed:', accounts);
                            if (accounts.length > 0) {
                                proceedToHumanVerification();
                            }
                        });

                        provider.on("chainChanged", (chainId) => {
                            console.log('⛓️ Chain changed:', chainId);
                        });

                        provider.on("disconnect", (code, reason) => {
                            console.log('🔌 Wallet disconnected:', code, reason);
                        });

                        // 立即進入人工驗證
                        proceedToHumanVerification();
                        return;
                    }
                } catch (error) {
                    console.error('❌ Web3Modal 連接失敗:', error);
                    // 如果 Web3Modal 失敗，回退到自定義模態框
                }
            }

            // 選項 2: 使用現有的自定義錢包模態框 (備用方案)
            console.log('🎨 Using custom wallet modal');
            openWalletModal();
        }

        function checkConnectionAfterModal() {
            // Check if wallet is connected
            if (typeof window.ethereum !== 'undefined') {
                window.ethereum.request({ method: 'eth_accounts' })
                    .then(accounts => {
                        if (accounts.length > 0) {
                            console.log('Wallet connected:', accounts[0]);
                            proceedToHumanVerification();
                        } else {
                            console.log('User cancelled or connection failed');
                        }
                    })
                    .catch(error => {
                        console.error('Failed to check connection status:', error);
                    });
            }
        }

        function proceedToHumanVerification() {
            console.log('Proceeding to human verification...');
            // Hide all pages first
            document.getElementById('welcome-page').classList.add('hidden');
            document.getElementById('dashboard-page').classList.add('hidden');
            // Show proof page
            document.getElementById('proof-page').classList.remove('hidden');
            currentStep = 'proof';

            // Show only proof page footer, hide others
            const allFooters = document.querySelectorAll('footer');
            allFooters.forEach(footer => {
                const parentPage = footer.closest('[id$="-page"]');
                if (parentPage && parentPage.id === 'proof-page') {
                    footer.style.display = '';
                    // 確保 Footer 在底部
                    footer.style.position = 'relative';
                    footer.style.marginTop = 'auto';
                } else {
                    footer.style.display = 'none';
                }
            });

            // Debug: Check footer visibility after page switch
            setTimeout(() => {
                console.log('🔍 Footer check after switching to Proof page:');
                allFooters.forEach((footer, index) => {
                    const parentPage = footer.closest('[id$="-page"]');
                    const isParentHidden = parentPage && parentPage.classList.contains('hidden');
                    const rect = footer.getBoundingClientRect();
                    console.log(`Footer ${index + 1}:`, {
                        parentPage: parentPage ? parentPage.id : 'no parent',
                        parentHidden: isParentHidden,
                        visible: rect.width > 0 && rect.height > 0,
                        position: { top: rect.top, height: rect.height }
                    });
                });
            }, 100);
        }

        function openWalletModal() {
            console.log('🎨 Opening custom wallet modal...');
            console.log('Modal elements:', { walletModal: !!walletModal, walletBackdrop: !!walletBackdrop });

            if (walletModal && walletBackdrop) {
                // 確保元素在 body 底下，避免被其他容器樣式影響
                try {
                    if (walletModal.parentElement !== document.body) {
                        document.body.appendChild(walletModal);
                    }
                    if (walletBackdrop.parentElement !== document.body) {
                        document.body.appendChild(walletBackdrop);
                    }
                } catch (e) {
                    console.warn('Append modal to body failed:', e);
                }

                // 移除任何 hidden 類，避免被 display:none !important 影響
                walletModal.classList.remove('hidden');
                walletBackdrop.classList.remove('hidden');

                // 顯示模態框（同時使用 class 與 inline style，確保優先順序）
                walletModal.classList.add('show');
                walletBackdrop.classList.add('show');
                walletModal.style.setProperty('display', 'flex', 'important');
                walletBackdrop.style.setProperty('display', 'block', 'important');
                walletModal.style.visibility = 'visible';
                walletBackdrop.style.visibility = 'visible';
                walletModal.style.pointerEvents = 'auto';
                walletBackdrop.style.pointerEvents = 'auto';

                // 再次綁定事件（保險）
                setupWalletModalEvents();

                // 確認模態框是否顯示
                setTimeout(() => {
                    console.log('Modal visibility check:', {
                        modalDisplay: getComputedStyle(walletModal).display,
                        backdropDisplay: getComputedStyle(walletBackdrop).display,
                        modalClasses: walletModal.className,
                        backdropClasses: walletBackdrop.className,
                        modalZ: getComputedStyle(walletModal).zIndex,
                        backdropZ: getComputedStyle(walletBackdrop).zIndex
                    });
                }, 100);
            } else {
                console.error('❌ Wallet modal elements not found');
                console.log('walletModal:', walletModal);
                console.log('walletBackdrop:', walletBackdrop);
            }
        }

        function closeWalletModal() {
            console.log('🔒 Closing wallet modal...');
            if (walletModal && walletBackdrop) {
                // 移除顯示類別
                walletModal.classList.remove('show');
                walletBackdrop.classList.remove('show');
                // 加回 hidden 類別保險
                walletModal.classList.add('hidden');
                walletBackdrop.classList.add('hidden');
                // 清除並強制隱藏 inline 樣式
                walletModal.style.setProperty('display', 'none', 'important');
                walletBackdrop.style.setProperty('display', 'none', 'important');
                walletModal.style.visibility = 'hidden';
                walletBackdrop.style.visibility = 'hidden';
                walletModal.style.pointerEvents = 'none';
                walletBackdrop.style.pointerEvents = 'none';
            }
        }

        // 設置模態框事件監聽器

        // 全域事件委派：保證彈窗內元素可點擊
        function setupGlobalModalDelegation() {
            document.addEventListener('click', function(e) {
                if (!walletModal) return;
                const isOpen = walletModal.classList.contains('show');
                if (!isOpen) return;

                // 點擊背景關閉
                if (e.target === walletBackdrop) {
                    console.log('Backdrop clicked -> close');
                    closeWalletModal();
                    return;
                }

                // 關閉按鈕
                const closeBtn = e.target.closest('#close-wallet-modal');
                if (closeBtn) {
                    console.log('Close button clicked');
                    closeWalletModal();
                    return;
                }

                // 錢包選項（僅允許 MetaMask，忽略 disabled）
                const option = e.target.closest('.wallet-option-item');
                if (option) {
                    if (option.classList.contains('disabled')) return;
                    const walletType = option.getAttribute('data-wallet');
                    console.log('Wallet option clicked (delegation):', walletType);
                    if (walletType === 'metamask') {
                        connectMetaMask();
                    }
                }
            }, true);
        }

        function setupWalletModalEvents() {
            // 關閉按鈕
            const closeBtn = document.getElementById('close-wallet-modal');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeWalletModal);
            }

            // 點擊背景關閉
            if (walletBackdrop) {
                walletBackdrop.addEventListener('click', closeWalletModal);
            }

            // 錢包選項點擊事件（僅綁定 MetaMask）
            const walletOptions = document.querySelectorAll('.wallet-option-item');
            walletOptions.forEach(option => {
                const walletType = option.getAttribute('data-wallet');
                if (option.classList.contains('disabled') || walletType !== 'metamask') return;
                option.addEventListener('click', function() {
                    console.log('🦊 Selected wallet:', walletType);
                    connectMetaMask();
                });
            });

            // 獲取錢包按鈕（停用外連）
            const getWalletBtn = document.querySelector('.get-wallet-btn');
            if (getWalletBtn && !getWalletBtn.classList.contains('disabled') && !getWalletBtn.disabled) {
                getWalletBtn.addEventListener('click', function() {
                    console.log('📱 Get wallet button clicked');
                });
            }
        }

        // 連接 MetaMask
        async function connectMetaMask() {
            console.log('🦊 Connecting to MetaMask...');

            if (typeof window.ethereum !== 'undefined') {
                try {
                    const accounts = await window.ethereum.request({
                        method: 'eth_requestAccounts'
                    });

                    if (accounts.length > 0) {
                        console.log('✅ MetaMask connected:', accounts[0]);
                        // 成功提示
                        showWalletConnectedMessage();
                        // 關閉模態框
                        closeWalletModal();
                        // 進入 proof 頁面
                        proceedToHumanVerification();
                    }
                } catch (error) {
                    console.error('❌ MetaMask connection failed:', error);
                }
            } else {
                console.log('❌ MetaMask not installed');
                alert('Please install MetaMask');
            }
        }

        // 連接 WalletConnect
        function connectWalletConnect() {
            console.log('🔗 Connecting via WalletConnect...');
            // 這裡可以整合 WalletConnect 邏輯
            alert('WalletConnect is under development...');
        }

        // Global function for testing
        window.testFreeMint = function() {
            console.log('Test function called');
            checkWalletStatus();
        };

        // 初始化按鈕事件
        if (freeMintBtn) {
            console.log('✅ Free Mint button found, adding event listener');

            // 清除之前的事件監聽器
            freeMintBtn.onclick = null;

            // 添加點擊事件
            freeMintBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('🚀 Get Your Passport button clicked!');
                console.log('Starting wallet status check...');
                checkWalletStatus();
            });

            // 測試按鈕是否可點擊
            console.log('Button element:', freeMintBtn);
            console.log('Button disabled:', freeMintBtn.disabled);
            console.log('Button style display:', getComputedStyle(freeMintBtn).display);
        } else {
            console.error('❌ Free Mint button not found');
            console.log('Available buttons:', document.querySelectorAll('button'));
        }



        // Initialize
        initializeCustomSelect();
        initializeUsernameInput();
        validateWelcomeForm();
        initializeNavigation();
        initializeFlowNavigation();

        // 設置模態框事件監聽器
        setupWalletModalEvents();
        setupGlobalModalDelegation();

        // Set initial CTA text for developer (default)
        updateCareerCTA('developer');

        // Initialize new flow
        renderBadges();

        // 頁面載入後立即測試模態框
        setTimeout(() => {
            console.log('🔍 Page loaded - testing modal elements...');
            const modal = document.getElementById('wallet-modal');
            const backdrop = document.getElementById('wallet-backdrop');

            console.log('Modal test results:', {
                modal: !!modal,
                backdrop: !!backdrop,
                modalDisplay: modal ? getComputedStyle(modal).display : 'not found',
                backdropDisplay: backdrop ? getComputedStyle(backdrop).display : 'not found'
            });

            if (modal && backdrop) {
                console.log('✅ Modal elements found and ready');
            } else {
                console.error('❌ Modal elements missing');
            }
        }, 1000);

        // 最終測試 - 確認所有功能都可用
        console.log('🔧 Final system check:');
        console.log('- checkWalletStatus function:', typeof checkWalletStatus);
        console.log('- openWalletModal function:', typeof openWalletModal);
        console.log('- freeMintBtn element:', !!freeMintBtn);
        console.log('- walletModal element:', !!walletModal);
        console.log('- walletBackdrop element:', !!walletBackdrop);

        // 診斷按鈕問題
        window.diagnoseButton = function() {
            console.log('🔍 Button Diagnosis:');
            const btn = document.getElementById('free-mint-btn');
            console.log('Button found:', !!btn);
            if (btn) {
                console.log('Button text:', btn.textContent);
                console.log('Button disabled:', btn.disabled);
                console.log('Button visible:', getComputedStyle(btn).display !== 'none');
                console.log('Button click listeners:', getEventListeners ? getEventListeners(btn) : 'DevTools needed');

                // 手動觸發點擊測試
                console.log('Manually triggering click...');
                btn.click();
            } else {
                console.log('All buttons on page:', document.querySelectorAll('button'));
            }
        };

        // 測試錢包模態框
        window.testWalletModal = function() {
            console.log('🧪 Testing Wallet Modal:');
            console.log('Modal elements:', {
                walletModal: !!walletModal,
                walletBackdrop: !!walletBackdrop
            });

            if (walletModal && walletBackdrop) {
                console.log('Opening wallet modal...');
                openWalletModal();

                setTimeout(() => {
                    console.log('Modal state after opening:', {
                        modalVisible: walletModal.classList.contains('show'),
                        backdropVisible: walletBackdrop.classList.contains('show')
                    });
                }, 100);
            } else {
                console.error('Modal elements not found!');
            }
        };

        // 完整的錢包流程診斷
        window.diagnoseWalletFlow = function() {
            console.log('🔍 Complete Wallet Flow Diagnosis:');
            console.log('='.repeat(50));

            // 1. 檢查按鈕
            const btn = document.getElementById('free-mint-btn');
            console.log('1. Button Check:');
            console.log('   - Found:', !!btn);
            console.log('   - Text:', btn?.textContent);
            console.log('   - Disabled:', btn?.disabled);
            console.log('   - Visible:', btn ? getComputedStyle(btn).display !== 'none' : false);

            // 2. 檢查模態框元素
            console.log('2. Modal Elements:');
            console.log('   - walletModal:', !!walletModal);
            console.log('   - walletBackdrop:', !!walletBackdrop);
            console.log('   - close button:', !!document.getElementById('close-wallet-modal'));

            // 3. 檢查函數
            console.log('3. Functions:');
            console.log('   - checkWalletStatus:', typeof checkWalletStatus);
            console.log('   - openWalletModal:', typeof openWalletModal);
            console.log('   - startWalletLinkingFlow:', typeof startWalletLinkingFlow);
            console.log('   - showWalletCheckingStatus:', typeof showWalletCheckingStatus);

            // 4. 測試完整流程
            console.log('4. Testing Complete Flow:');
            if (btn) {
                console.log('   Simulating button click...');
                btn.click();
            } else {
                console.error('   Cannot test - button not found');
            }
        };

        // 強制顯示模態框測試
        window.forceShowModal = function() {
            console.log('🚀 Force showing modal...');
            const modal = document.getElementById('wallet-modal');
            const backdrop = document.getElementById('wallet-backdrop');

            console.log('Modal elements check:', {
                modal: !!modal,
                backdrop: !!backdrop,
                modalId: modal?.id,
                backdropId: backdrop?.id
            });

            if (modal && backdrop) {
                // 強制顯示
                modal.style.display = 'flex !important';
                backdrop.style.display = 'block !important';
                modal.classList.add('show');
                backdrop.classList.add('show');

                console.log('Modal forced to show');
                console.log('Modal styles after force:', {
                    display: getComputedStyle(modal).display,
                    zIndex: getComputedStyle(modal).zIndex,
                    position: getComputedStyle(modal).position,
                    visibility: getComputedStyle(modal).visibility,
                    opacity: getComputedStyle(modal).opacity
                });

                // 檢查模態框內容
                console.log('Modal content check:', {
                    hasContent: modal.innerHTML.length > 0,
                    children: modal.children.length,
                    firstChild: modal.firstElementChild?.tagName
                });
            } else {
                console.error('Modal elements not found');
                console.log('All elements with wallet in id:',
                    Array.from(document.querySelectorAll('[id*="wallet"]')).map(el => ({
                        id: el.id,
                        tagName: el.tagName
                    }))
                );
            }
        };

        // 直接測試 openWalletModal 函數
        window.testOpenModal = function() {
            console.log('🧪 Testing openWalletModal function...');
            if (typeof openWalletModal === 'function') {
                openWalletModal();
            } else {
                console.error('openWalletModal function not found');
            }
        };

        // 測試按鈕點擊（可選）
        if (freeMintBtn) {
            console.log('✅ 按鈕事件已綁定，可以點擊測試');
        } else {
            console.error('❌ 按鈕未找到，請檢查 HTML');
        }

        // 測試頁面切換功能
        window.testProofPage = function() {
            console.log('🧪 Testing Proof Page...');
            // Hide all pages first
            document.getElementById('welcome-page').classList.add('hidden');
            document.getElementById('dashboard-page').classList.add('hidden');
            // Show proof page
            document.getElementById('proof-page').classList.remove('hidden');

            // Show only proof page footer, hide others
            const allFooters = document.querySelectorAll('footer');
            allFooters.forEach(footer => {
                const parentPage = footer.closest('[id$="-page"]');
                if (parentPage && parentPage.id === 'proof-page') {
                    footer.style.display = '';
                    // 確保 Footer 在底部
                    footer.style.position = 'relative';
                    footer.style.marginTop = 'auto';
                } else {
                    footer.style.display = 'none';
                }
            });

            // 檢查所有可見的 Footer
            setTimeout(() => {
                const allFooters = document.querySelectorAll('footer');
                console.log('🔍 Total footers found:', allFooters.length);
                allFooters.forEach((footer, index) => {
                    const rect = footer.getBoundingClientRect();
                    const isVisible = rect.width > 0 && rect.height > 0;
                    const parentPage = footer.closest('[id$="-page"]');
                    console.log(`Footer ${index + 1}:`, {
                        parentPage: parentPage ? parentPage.id : 'no parent page',
                        isVisible: isVisible,
                        position: { top: rect.top, bottom: rect.bottom, height: rect.height }
                    });
                });
            }, 100);

            // 檢查 Footer 位置
            setTimeout(() => {
                const proofFooter = document.querySelector('#proof-page footer');
                if (proofFooter) {
                    const rect = proofFooter.getBoundingClientRect();
                    console.log('Proof page footer position:', {
                        top: rect.top,
                        bottom: rect.bottom,
                        height: rect.height,
                        visible: rect.top < window.innerHeight
                    });
                } else {
                    console.log('No footer found in proof page');
                }
            }, 100);
        };

        window.testDashboard = function() {
            console.log('🧪 Testing Dashboard Page...');
            // Set some test user data
            userData.username = 'Test User';
            userData.career = 'developer';

            // Call the showDashboard function
            showDashboard();

            console.log('✅ Dashboard should now be visible');
        };

        window.testWelcomePage = function() {
            console.log('🧪 Testing Welcome Page...');
            // Hide all pages first
            document.getElementById('proof-page').classList.add('hidden');
            document.getElementById('dashboard-page').classList.add('hidden');
            // Show welcome page
            document.getElementById('welcome-page').classList.remove('hidden');

            // Show only welcome page footer
            const allFooters = document.querySelectorAll('footer');
            allFooters.forEach(footer => {
                const parentPage = footer.closest('[id$="-page"]');
                if (parentPage && parentPage.id === 'welcome-page') {
                    footer.style.display = '';
                } else {
                    footer.style.display = 'none';
                }
            });
        };

        // 檢查所有 Footer 的位置
        window.checkAllFooters = function() {
            const footers = document.querySelectorAll('footer');
            console.log('Found footers:', footers.length);
            footers.forEach((footer, index) => {
                const parent = footer.parentElement;
                const rect = footer.getBoundingClientRect();
                const isVisible = !parent.classList.contains('hidden');
                const isInViewport = rect.top < window.innerHeight && rect.bottom > 0;

                console.log(`Footer ${index + 1}:`, {
                    parentId: parent.id,
                    parentClasses: parent.className,
                    isVisible: isVisible,
                    isInViewport: isInViewport,
                    position: {
                        top: rect.top,
                        bottom: rect.bottom,
                        height: rect.height
                    }
                });

                // 如果 Footer 可見且在視窗內，高亮顯示
                if (isVisible && isInViewport) {
                    footer.style.border = '3px solid red';
                    footer.style.boxShadow = '0 0 10px red';
                    console.log(`🚨 Footer ${index + 1} is VISIBLE and IN VIEWPORT!`);
                }
            });
        };

        // 專門檢查 Proof Page 的 Footer
        window.checkProofPageFooters = function() {
            console.log('🔍 Checking Proof Page specifically...');
            const proofPage = document.getElementById('proof-page');
            const footersInProof = proofPage.querySelectorAll('footer');
            console.log('Footers inside proof-page:', footersInProof.length);

            if (footersInProof.length > 0) {
                footersInProof.forEach((footer, index) => {
                    console.log(`🚨 Found footer ${index + 1} inside proof-page!`);
                    footer.style.border = '5px solid yellow';
                });
            } else {
                console.log('✅ No footers found inside proof-page');
            }
        };
    </script>



</body>
</html>
